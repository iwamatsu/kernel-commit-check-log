Check from v4.4.35 to v4.4.36
Commit count: 24
checking 87c6c6ef5b17bfed9226f1307435910626817ebb ......
checking 6eddf5c993dd9bf4efcf2509e4ca633b9441a66a ......
	 orig commit -> 7ff723ad0f87feba43dda45fdae71206063dd7d4 ......
checking c178e4809df724ba9603b3263c2ac6375ad9c147 ......
	 orig commit -> c9b8af1330198ae241cd545e1f040019010d44d9 ......
checking 0b7860d6e88c35deb46e65d3f7d2ebfaa6b38219 ......
	 orig commit -> 2d4d5481e2d6f93b25fcfb13a9f20bbfbf54266a ......
checking bab2f72f70eae417c871d9b24b3fa5dd0dea254b ......
checking 4f13967ecd20e32ab9564231e872d57f79fb61ef ......
	 orig commit -> 8c57cac1457f3125a5d13dc03635c0708c61bff0 ......
checking e1049372d7a7196f036664e7b909fa2ec22ed5b8 ......
	 orig commit -> 777e3cbc791f131806d9bf24b3325637c7fc228d ......
checking 249090830942565fb0ce7c1e018d927a14282ead ......
	 orig commit -> f5527fffff3f002b0a6b376163613b82f69de073 ......
checking cd4235a794c0bdc29995ae8b805aac1d235ab499 ......
	 orig commit -> 5035b230e7b67ac12691ed3b5495bbb617027b68 ......
checking 7a1ab6a2bf3a69282f57a8b710e4e9e52f381678 ......
	 orig commit -> c0452fb9fb8f49c7d68ab9fa0ad092016be7b45f ......
checking e541fd815db94038c9615c4f645a0639c0e474be ......
	 orig commit -> 741dc7bf1c7c7d93b853bb55efe77baa27e1b0a9 ......
checking 0c0ddbf7efec0aea124e4f7688e2b310faef7a91 ......
	 orig commit -> d55b352b01bc78fbc3d1bb650140668b87e58bf9 ......
checking be79d7fa43f91c22e0e140c06aad57e9e5f417b2 ......
	 orig commit -> 3d40658c977769ce2138f286cf131537bf68bdfe ......
checking 8316338a201b3cd57605fc6c4ea0d9ce8a0d35c0 ......
	 orig commit -> 9853a55ef1bb66d7411136046060bbfb69c714fa ......
checking 4df31626fc0804822cc967807fb8105d09e8ab38 ......
	 orig commit -> e658a6f14d7c0243205f035979d0ecf6c12a036f ......
checking ffffc1ed47e76d13cafbc645792ca184331b3123 ......
	 orig commit -> 18f6084a989ba1b38702f9af37a2e4049a924be6 ......
		 18f6084a989ba1b38702f9af37a2e4049a924be6 has problem. Fixes commit -> ffb58456589443ca572221fabbdef3db8483a779
commit 18639c4bad72218954e728e9ca65c33b13ba673a
Author: James Bottomley <James.Bottomley@HansenPartnership.com>
Date:   Sun Jan 1 09:39:24 2017 -0800

    scsi: mpt3sas: fix hang on ata passthrough commands
    
    commit ffb58456589443ca572221fabbdef3db8483a779 upstream.
    
    mpt3sas has a firmware failure where it can only handle one pass through
    ATA command at a time.  If another comes in, contrary to the SAT
    standard, it will hang until the first one completes (causing long
    commands like secure erase to timeout).  The original fix was to block
    the device when an ATA command came in, but this caused a regression
    with
    
    commit 669f044170d8933c3d66d231b69ea97cb8447338
    Author: Bart Van Assche <bart.vanassche@sandisk.com>
    Date:   Tue Nov 22 16:17:13 2016 -0800
    
        scsi: srp_transport: Move queuecommand() wait code to SCSI core
    
    So fix the original fix of the secure erase timeout by properly
    returning SAM_STAT_BUSY like the SAT recommends.  The original patch
    also had a concurrency problem since scsih_qcmd is lockless at that
    point (this is fixed by using atomic bitops to set and test the flag).
    
    [mkp: addressed feedback wrt. test_bit and fixed whitespace]
    
    Fixes: 18f6084a989ba1b (mpt3sas: Fix secure erase premature termination)
    Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
    Acked-by: Sreekanth Reddy <Sreekanth.Reddy@broadcom.com>
    Reviewed-by: Christoph Hellwig <hch@lst.de>
    Reported-by: Ingo Molnar <mingo@kernel.org>
    Tested-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
    Cc: Joe Korty <joe.korty@ccur.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking ab0867dd8bc8b33ac662467b2d6cf2aff2516abc ......
	 orig commit -> 2ce9d2272b98743b911196c49e7af5841381c206 ......
checking f3f95f177269f0bafb125769cc6299cec4622574 ......
	 orig commit -> 9bfef729a3d11f04d12788d749a3ce6b47645734 ......
checking 1f36db0b397fd490d296b6e526d593faea2960aa ......
	 orig commit -> 2ab13292d7a314fa45de0acc808e41aaad31989c ......
checking 55d061bf9d23bb8c5ada8c4f00b083894a146f2c ......
	 orig commit -> a5d906bb261cde5f881a949d3b0fbaa285dcc574 ......
checking 341f9730c29ba2673a76734166ed9ba9121add0b ......
	 orig commit -> df492896e6dfb44fd1154f5402428d8e52705081 ......
checking b7f9404d1b488b6773c7a2e6da92aa6cb5bd125e ......
	 orig commit -> 2117d5398c81554fbf803f5fd1dc55eb78216c0c ......
checking c091bbddbc5e237c3927bf8aead8ad6484b51183 ......
	 orig commit -> 1c387188c60f53b338c20eee32db055dfe022a9b ......
		 1c387188c60f53b338c20eee32db055dfe022a9b has problem. Fixes commit -> 5003ae1e735e6bfe4679d9bed6846274f322e77e
commit 55b6c187cf9d12d8e667ccfa5386bd162fc7ae2b
Author: Koos Vriezen <koos.vriezen@gmail.com>
Date:   Wed Mar 1 21:02:50 2017 +0100

    iommu/vt-d: Fix NULL pointer dereference in device_to_iommu
    
    commit 5003ae1e735e6bfe4679d9bed6846274f322e77e upstream.
    
    The function device_to_iommu() in the Intel VT-d driver
    lacks a NULL-ptr check, resulting in this oops at boot on
    some platforms:
    
     BUG: unable to handle kernel NULL pointer dereference at 00000000000007ab
     IP: [<ffffffff8132234a>] device_to_iommu+0x11a/0x1a0
     PGD 0
    
     [...]
    
     Call Trace:
       ? find_or_alloc_domain.constprop.29+0x1a/0x300
       ? dw_dma_probe+0x561/0x580 [dw_dmac_core]
       ? __get_valid_domain_for_dev+0x39/0x120
       ? __intel_map_single+0x138/0x180
       ? intel_alloc_coherent+0xb6/0x120
       ? sst_hsw_dsp_init+0x173/0x420 [snd_soc_sst_haswell_pcm]
       ? mutex_lock+0x9/0x30
       ? kernfs_add_one+0xdb/0x130
       ? devres_add+0x19/0x60
       ? hsw_pcm_dev_probe+0x46/0xd0 [snd_soc_sst_haswell_pcm]
       ? platform_drv_probe+0x30/0x90
       ? driver_probe_device+0x1ed/0x2b0
       ? __driver_attach+0x8f/0xa0
       ? driver_probe_device+0x2b0/0x2b0
       ? bus_for_each_dev+0x55/0x90
       ? bus_add_driver+0x110/0x210
       ? 0xffffffffa11ea000
       ? driver_register+0x52/0xc0
       ? 0xffffffffa11ea000
       ? do_one_initcall+0x32/0x130
       ? free_vmap_area_noflush+0x37/0x70
       ? kmem_cache_alloc+0x88/0xd0
       ? do_init_module+0x51/0x1c4
       ? load_module+0x1ee9/0x2430
       ? show_taint+0x20/0x20
       ? kernel_read_file+0xfd/0x190
       ? SyS_finit_module+0xa3/0xb0
       ? do_syscall_64+0x4a/0xb0
       ? entry_SYSCALL64_slow_path+0x25/0x25
     Code: 78 ff ff ff 4d 85 c0 74 ee 49 8b 5a 10 0f b6 9b e0 00 00 00 41 38 98 e0 00 00 00 77 da 0f b6 eb 49 39 a8 88 00 00 00 72 ce eb 8f <41> f6 82 ab 07 00 00 04 0f 85 76 ff ff ff 0f b6 4d 08 88 0e 49
     RIP  [<ffffffff8132234a>] device_to_iommu+0x11a/0x1a0
      RSP <ffffc90001457a78>
     CR2: 00000000000007ab
     ---[ end trace 16f974b6d58d0aad ]---
    
    Add the missing pointer check.
    
    Fixes: 1c387188c60f53b338c20eee32db055dfe022a9b ("iommu/vt-d: Fix IOMMU lookup for SR-IOV Virtual Functions")
    Signed-off-by: Koos Vriezen <koos.vriezen@gmail.com>
    Signed-off-by: Joerg Roedel <jroedel@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking d88a1bd00cfa676163853ed6017922abd0cb3f39 ......
	 orig commit -> 910170442944e1f8674fd5ddbeeb8ccd1877ea98 ......
