Check from v4.4.83 to v4.4.84
Commit count: 21
checking 982ce2aa79fbe7c961ee948857d5b5b2a0b2ddd9 ......
checking ccf1033d99834d5ead622542b325e0f063caf05e ......
	 orig commit -> bed9ff165960921303a100228585f2d1691b42eb ......
checking 6b45092236817efd713e92beab934fe404393324 ......
	 orig commit -> ed18c5fa945768a9bec994e786edbbbc7695acf6 ......
checking ce1b98a30571b1022d6ce86d9876a7a7dbf9aed5 ......
	 orig commit -> 6fc2e83077b05a061afe9b24f2fdff7a0434eb67 ......
checking b4cf49024cf412a94121e61f8056636c557ead98 ......
	 orig commit -> dd1c1f2f2028a7b851f701fc6a8ebe39dcb95e7c ......
checking 46d51a26efbc7cbaa2bc1f01628a00a604193856 ......
	 orig commit -> 197e7e521384a23b9e585178f3f11c9fa08274b9 ......
checking b27e9ff9a5f457e85c47733387426bf522cef2aa ......
	 orig commit -> 277867ade8262583f4280cadbe90e0031a3706a7 ......
checking ed281a6acaf1260800841fc8182e6a8b1d1b1371 ......
	 orig commit -> 469bcef53c546bb792aa66303933272991b7831d ......
checking 64340986295dea6cf954caa630000a77775f9975 ......
	 orig commit -> e93c17301ac55321fc18e0f8316e924e58a83c8c ......
checking c0b397fd6b2b8ed7b39a717340b85b4b1add5332 ......
	 orig commit -> 462cdace790ac2ed6aad1b19c9c0af0143b6aab0 ......
checking 240628085effc47e86f51fc3fb37bc0e628f9a85 ......
	 orig commit -> c715b72c1ba406f133217b509044c38d8e714a37 ......
		 c715b72c1ba406f133217b509044c38d8e714a37 has problem. Fixes commit -> be739f4b5ddece74ef25e2304b17a7fd24575e9b
checking cc971fa12bd2dff6c0432c860d784c6cdaf5a04b ......
	 orig commit -> 73223e4e2e3867ebf033a5a8eb2e5df0158ccc99 ......
checking 669c8ab896a2f96a1d49cfa1f5efaaf64c0f6aaa ......
	 orig commit -> 0f174b3525a43bd51f9397394763925e0ebe7bc7 ......
checking f600f9c43346a7f26e9b808b827adfaf5e73958b ......
	 orig commit -> a8e800fe0f68bc28ce309914f47e432742b865ed ......
checking 735aa043bf00c809a93d01c7ef4039115f1ef590 ......
	 orig commit -> 7e1d90f60a0d501c8503e636942ca704a454d910 ......
	 orig commit -> 4842e98f26dd80be3623c4714a244ba52ea096a8 ......
		 4842e98f26dd80be3623c4714a244ba52ea096a8 has problem. Fixes commit -> 7e1d90f60a0d501c8503e636942ca704a454d910
commit 735aa043bf00c809a93d01c7ef4039115f1ef590
Author: Daniel Mentz <danielmentz@google.com>
Date:   Mon Aug 14 14:46:01 2017 -0700

    ALSA: seq: 2nd attempt at fixing race creating a queue
    
    commit 7e1d90f60a0d501c8503e636942ca704a454d910 upstream.
    
    commit 4842e98f26dd80be3623c4714a244ba52ea096a8 ("ALSA: seq: Fix race at
    creating a queue") attempted to fix a race reported by syzkaller. That
    fix has been described as follows:
    
    "
    When a sequencer queue is created in snd_seq_queue_alloc(),it adds the
    new queue element to the public list before referencing it.  Thus the
    queue might be deleted before the call of snd_seq_queue_use(), and it
    results in the use-after-free error, as spotted by syzkaller.
    
    The fix is to reference the queue object at the right time.
    "
    
    Even with that fix in place, syzkaller reported a use-after-free error.
    It specifically pointed to the last instruction "return q->queue" in
    snd_seq_queue_alloc(). The pointer q is being used after kfree() has
    been called on it.
    
    It turned out that there is still a small window where a race can
    happen. The window opens at
    snd_seq_ioctl_create_queue()->snd_seq_queue_alloc()->queue_list_add()
    and closes at
    snd_seq_ioctl_create_queue()->queueptr()->snd_use_lock_use(). Between
    these two calls, a different thread could delete the queue and possibly
    re-create a different queue in the same location in queue_list.
    
    This change prevents this situation by calling snd_use_lock_use() from
    snd_seq_queue_alloc() prior to calling queue_list_add(). It is then the
    caller's responsibility to call snd_use_lock_free(&q->use_lock).
    
    Fixes: 4842e98f26dd ("ALSA: seq: Fix race at creating a queue")
    Reported-by: Dmitry Vyukov <dvyukov@google.com>
    Signed-off-by: Daniel Mentz <danielmentz@google.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking ae4743cac8d771a614da982ed51ffd396041c3ec ......
	 orig commit -> 76988690402dde2880bfe06ecccf381d48ba8e1c ......
checking 0dbf7f7811df34f0e6af97b885619780014f81e1 ......
	 orig commit -> 1874064eed0502bd9bef7be8023757b0c4f26883 ......
checking 4362533a04680de13acd3e6f5a16c3d81502f589 ......
	 orig commit -> 8861249c740fc4af9ddc5aee321eafefb960d7c6 ......
checking 04f4f73ffe9383921794b833346911bd1e19b228 ......
	 orig commit -> 4098116039911e8870d84c975e2ec22dab65a909 ......
checking ea088172692cbadddc4efcdae2a5dfe1693e8b20 ......
	 orig commit -> d76036ab47eafa6ce52b69482e91ca3ba337d6d6 ......
checking b72f1119c654a2e3aeb41175ff94299a4ec01afb ......
	 orig commit -> 9c3f3794926a997b1cab6c42480ff300efa2d162 ......
