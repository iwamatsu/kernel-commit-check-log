Check from v4.14.53 to v4.14.54
Commit count: 62
checking 5893f4c3fb784f48c020d2637c129a45da7be39e ......
checking 88b01cac4add369bf3f0401a1da7a9bd6bf19305 ......
	 orig commit -> a95691bc54af1ac4b12c354f91e9cabf1cb068df ......
checking 28b64cc7a8462cdfffc171ca583179f6c1c36b65 ......
	 orig commit -> 26de0b76d9ba3200f09c6cb9d9618bda338be5f7 ......
checking 4888ced6b749aa51355b4614af25e2eec0818f62 ......
	 orig commit -> 32ffd6e8d1f6cef94bedca15dfcdebdeb590499d ......
checking 0d5e04e239ad5b18c4099ef942843bf510af1122 ......
	 orig commit -> 7af443ee1697607541c6346c87385adab2214743 ......
checking e4c55e0e6a754d21ea3d2e528e384b546192b9a1 ......
	 orig commit -> 175f0e25abeaa2218d431141ce19cf1de70fa82d ......
checking 93b84462eadf0ebbf72abddfcf75d46ac9b59730 ......
	 orig commit -> 829bc787c1a0403e4d886296dd4d90c5f9c1744a ......
checking ae14c044587eceb1775c03e0be9e4e547d262aa2 ......
	 orig commit -> ab4e32ff5aa797eaea551dbb67946e2fcb56cc7e ......
checking be5af6bec31a5c22f61de1be848c3fd0e6e3a2f8 ......
	 orig commit -> d121109100bda84bbbb199dab97f9d56432ab235 ......
checking d689ad5c91af0843aceef7975d7ca9356c84a335 ......
	 orig commit -> 2415f3bd059fe050eb98aedf93664d000ceb4e92 ......
checking d20dcd2f11357f2b0f52a243e4737c129240475d ......
	 orig commit -> f9c6442a8f0b1dde9e755eb4ff6fa22bcce4eabc ......
checking 3ee6bd9411a60f90b5adeea5440cbac302c3e9d0 ......
	 orig commit -> ab1068d6866e28bf6427ceaea681a381e5870a4a ......
checking 4abab5dca7237e89f62069587f64feebc56dc105 ......
	 orig commit -> 52f96757905bbf0edef47f3ee6c7c784e7f8ff8a ......
checking 27aa533f24e9951aff62b3b6a14c1feed8cbf624 ......
	 orig commit -> 3e0f64b7dd3149f75e8652ff1df56cffeedc8fc1 ......
checking 510e1e8020a8a1b7cf53a84f18a7d03757daba55 ......
	 orig commit -> f0f59a2fab8e52b9d582b39da39f22230ca80aee ......
checking db73501ebc3ad56b94aa5adb7365a9a4d5313523 ......
	 orig commit -> 94c752f99954797da583a84c4907ff19e92550a4 ......
checking e36bc9930d85f4ae29b67eb71bc66ae49e217b71 ......
	 orig commit -> 378831e4daec75fbba6d3612bcf3b4dd00ddbf08 ......
checking 4cf1fbcdef7f04605333a1786f619122c135c0fe ......
	 orig commit -> d9f92772e8ec388d070752ee8f187ef8fa18621f ......
checking 693d06dffb436ae22c899e0ffd7c28064dd8ec32 ......
	 orig commit -> e9893e6fa932f42c90c4ac5849fa9aa0f0f00a34 ......
checking 0ed70f20644959caf01a89b17fccebd19b204d92 ......
	 orig commit -> df07101e1c4a29e820df02f9989a066988b160e6 ......
checking 259cc05cce439944121a7c26e439713b873af8b2 ......
	 orig commit -> adc972c5b88829d38ede08b1069718661c7330ae ......
checking 5acd64888e020f0ce758fa14e65a75692dcc6e37 ......
	 orig commit -> cede24d1b21d68d84ac5a36c44f7d37daadcc258 ......
checking 3f8e85fbbaa55c9981e27ae9e5182569b393189b ......
	 orig commit -> 47b7e7f82802dced3ac73658bf4b77584a63063f ......
		 47b7e7f82802dced3ac73658bf4b77584a63063f has problem. Fixes commit -> da786717e0894886301ed2536843c13f9e8fd53e
cede24d1b21d68d84ac5a36c44f7d37daadcc258
commit 2b81b00edba15c61117e7e0b727757b6f28dc5dd
Author: Florian Westphal <fw@strlen.de>
Date:   Wed Jul 25 21:38:43 2018 +0200

    netfilter: ip6t_rpfilter: set F_IFACE for linklocal addresses
    
    [ Upstream commit da786717e0894886301ed2536843c13f9e8fd53e ]
    
    Roman reports that DHCPv6 client no longer sees replies from server
    due to
    
    ip6tables -t raw -A PREROUTING -m rpfilter --invert -j DROP
    
    rule.  We need to set the F_IFACE flag for linklocal addresses, they
    are scoped per-device.
    
    Fixes: 47b7e7f82802 ("netfilter: don't set F_IFACE on ipv6 fib lookups")
    Reported-by: Roman Mamedov <rm@romanrm.net>
    Tested-by: Roman Mamedov <rm@romanrm.net>
    Signed-off-by: Florian Westphal <fw@strlen.de>
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Sasha Levin <alexander.levin@microsoft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 5acd64888e020f0ce758fa14e65a75692dcc6e37
Author: Vincent Bernat <vincent@bernat.im>
Date:   Sun May 20 13:03:38 2018 +0200

    netfilter: ip6t_rpfilter: provide input interface for route lookup
    
    commit cede24d1b21d68d84ac5a36c44f7d37daadcc258 upstream.
    
    In commit 47b7e7f82802, this bit was removed at the same time the
    RT6_LOOKUP_F_IFACE flag was removed. However, it is needed when
    link-local addresses are used, which is a very common case: when
    packets are routed, neighbor solicitations are done using link-local
    addresses. For example, the following neighbor solicitation is not
    matched by "-m rpfilter":
    
        IP6 fe80::5254:33ff:fe00:1 > ff02::1:ff00:3: ICMP6, neighbor
        solicitation, who has 2001:db8::5254:33ff:fe00:3, length 32
    
    Commit 47b7e7f82802 doesn't quite explain why we shouldn't use
    RT6_LOOKUP_F_IFACE in the rpfilter case. I suppose the interface check
    later in the function would make it redundant. However, the remaining
    of the routing code is using RT6_LOOKUP_F_IFACE when there is no
    source address (which matches rpfilter's case with a non-unicast
    destination, like with neighbor solicitation).
    
    Signed-off-by: Vincent Bernat <vincent@bernat.im>
    Fixes: 47b7e7f82802 ("netfilter: don't set F_IFACE on ipv6 fib lookups")
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
commit 2b81b00edba15c61117e7e0b727757b6f28dc5dd
Author: Florian Westphal <fw@strlen.de>
Date:   Wed Jul 25 21:38:43 2018 +0200

    netfilter: ip6t_rpfilter: set F_IFACE for linklocal addresses
    
    [ Upstream commit da786717e0894886301ed2536843c13f9e8fd53e ]
    
    Roman reports that DHCPv6 client no longer sees replies from server
    due to
    
    ip6tables -t raw -A PREROUTING -m rpfilter --invert -j DROP
    
    rule.  We need to set the F_IFACE flag for linklocal addresses, they
    are scoped per-device.
    
    Fixes: 47b7e7f82802 ("netfilter: don't set F_IFACE on ipv6 fib lookups")
    Reported-by: Roman Mamedov <rm@romanrm.net>
    Tested-by: Roman Mamedov <rm@romanrm.net>
    Signed-off-by: Florian Westphal <fw@strlen.de>
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Sasha Levin <alexander.levin@microsoft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 5acd64888e020f0ce758fa14e65a75692dcc6e37
Author: Vincent Bernat <vincent@bernat.im>
Date:   Sun May 20 13:03:38 2018 +0200

    netfilter: ip6t_rpfilter: provide input interface for route lookup
    
    commit cede24d1b21d68d84ac5a36c44f7d37daadcc258 upstream.
    
    In commit 47b7e7f82802, this bit was removed at the same time the
    RT6_LOOKUP_F_IFACE flag was removed. However, it is needed when
    link-local addresses are used, which is a very common case: when
    packets are routed, neighbor solicitations are done using link-local
    addresses. For example, the following neighbor solicitation is not
    matched by "-m rpfilter":
    
        IP6 fe80::5254:33ff:fe00:1 > ff02::1:ff00:3: ICMP6, neighbor
        solicitation, who has 2001:db8::5254:33ff:fe00:3, length 32
    
    Commit 47b7e7f82802 doesn't quite explain why we shouldn't use
    RT6_LOOKUP_F_IFACE in the rpfilter case. I suppose the interface check
    later in the function would make it redundant. However, the remaining
    of the routing code is using RT6_LOOKUP_F_IFACE when there is no
    source address (which matches rpfilter's case with a non-unicast
    destination, like with neighbor solicitation).
    
    Signed-off-by: Vincent Bernat <vincent@bernat.im>
    Fixes: 47b7e7f82802 ("netfilter: don't set F_IFACE on ipv6 fib lookups")
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking 2fc45ef962879d29f9567202e3a183fab5a7fd37 ......
	 orig commit -> b03e0ccb5ab9df3efbe51c87843a1ffbecbafa1f ......
checking ce57466d323b224bc817bbb07791b4ca111bd53e ......
	 orig commit -> 35bfc52187f6df8779d0f1cebdb52b7f797baf4e ......
		 35bfc52187f6df8779d0f1cebdb52b7f797baf4e has problem. Fixes commit -> 059421e041eb461fb2b3e81c9adaec18ef03ca3c
checking 7c435e22453038ea29e6467be9afe05225d53de2 ......
	 orig commit -> 9e1cc0a54556a6c63dc0cfb7cd7d60d43337bba6 ......
checking feabea21655961e6b0f87ad7351a4f99515c6b09 ......
	 orig commit -> b3143b9a38d5039bcd1f2d1c94039651bfba8043 ......
checking cc091f3fbbdb117d819536d6249e34322f991899 ......
	 orig commit -> 52a0d49de3d592a3118e13f35985e3d99eaf43df ......
checking e44e4cf3a8dbfee3f6e078f254c26e5a5168c6a2 ......
	 orig commit -> 4d5324f760aacaefeb721b172aa14bf66045c332 ......
checking b8d8cde449fd51db0bb407dece03d36ced1acb83 ......
	 orig commit -> 360cc79d9d299ce297b205508276285ceffc5fa8 ......
checking 44956f98fd8b4f235f8f40a367955f55f0477b37 ......
	 orig commit -> 467697d289e7e6e1b15910d99096c0da08c56d5b ......
checking 082711fa317845b535faa0aeea7ee3ff82a08301 ......
	 orig commit -> f0dfd7a2b35b02030949100247d851b793cb275f ......
checking 174757e28b7bc261f8ddd12467786f286717a108 ......
	 orig commit -> bbb8c61f97e3a2dd91b30d3e57b7964a67569d11 ......
checking d3a9b8a511812fce32be5253e8ef2a3d54b34b4d ......
	 orig commit -> ad9d9e85072b668731f356be0a3750a3ba22a607 ......
checking 491b1a866e4ad2f5b6f5d60a23e16ae77ec37d5c ......
	 orig commit -> 97a0549b15a0b466c47f6a0143a490a082c64b4e ......
checking 2b93cb2861dedfc43d7eb82c37c4eafbc385fef8 ......
	 orig commit -> bb7b40aecbf778c0c83a5bd62b0f03ca9f49a618 ......
		 bb7b40aecbf778c0c83a5bd62b0f03ca9f49a618 has problem. Fixes commit -> ca08987885a147643817d02bf260bc4756ce8cd4
commit 397727e77f2f32af322f850b457c1503acdff220
Author: Taehee Yoo <ap420073@gmail.com>
Date:   Wed Nov 28 11:27:28 2018 +0900

    netfilter: nf_tables: deactivate expressions in rule replecement routine
    
    [ Upstream commit ca08987885a147643817d02bf260bc4756ce8cd4 ]
    
    There is no expression deactivation call from the rule replacement path,
    hence, chain counter is not decremented. A few steps to reproduce the
    problem:
    
       %nft add table ip filter
       %nft add chain ip filter c1
       %nft add chain ip filter c1
       %nft add rule ip filter c1 jump c2
       %nft replace rule ip filter c1 handle 3 accept
       %nft flush ruleset
    
    <jump c2> expression means immediate NFT_JUMP to chain c2.
    Reference count of chain c2 is increased when the rule is added.
    
    When rule is deleted or replaced, the reference counter of c2 should be
    decreased via nft_rule_expr_deactivate() which calls
    nft_immediate_deactivate().
    
    Splat looks like:
    [  214.396453] WARNING: CPU: 1 PID: 21 at net/netfilter/nf_tables_api.c:1432 nf_tables_chain_destroy.isra.38+0x2f9/0x3a0 [nf_tables]
    [  214.398983] Modules linked in: nf_tables nfnetlink
    [  214.398983] CPU: 1 PID: 21 Comm: kworker/1:1 Not tainted 4.20.0-rc2+ #44
    [  214.398983] Workqueue: events nf_tables_trans_destroy_work [nf_tables]
    [  214.398983] RIP: 0010:nf_tables_chain_destroy.isra.38+0x2f9/0x3a0 [nf_tables]
    [  214.398983] Code: 00 00 00 fc ff df 48 89 fa 48 c1 ea 03 80 3c 02 00 0f 85 8e 00 00 00 48 8b 7b 58 e8 e1 2c 4e c6 48 89 df e8 d9 2c 4e c6 eb 9a <0f> 0b eb 96 0f 0b e9 7e fe ff ff e8 a7 7e 4e c6 e9 a4 fe ff ff e8
    [  214.398983] RSP: 0018:ffff8881152874e8 EFLAGS: 00010202
    [  214.398983] RAX: 0000000000000001 RBX: ffff88810ef9fc28 RCX: ffff8881152876f0
    [  214.398983] RDX: dffffc0000000000 RSI: 1ffff11022a50ede RDI: ffff88810ef9fc78
    [  214.398983] RBP: 1ffff11022a50e9d R08: 0000000080000000 R09: 0000000000000000
    [  214.398983] R10: 0000000000000000 R11: 0000000000000000 R12: 1ffff11022a50eba
    [  214.398983] R13: ffff888114446e08 R14: ffff8881152876f0 R15: ffffed1022a50ed6
    [  214.398983] FS:  0000000000000000(0000) GS:ffff888116400000(0000) knlGS:0000000000000000
    [  214.398983] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
    [  214.398983] CR2: 00007fab9bb5f868 CR3: 000000012aa16000 CR4: 00000000001006e0
    [  214.398983] Call Trace:
    [  214.398983]  ? nf_tables_table_destroy.isra.37+0x100/0x100 [nf_tables]
    [  214.398983]  ? __kasan_slab_free+0x145/0x180
    [  214.398983]  ? nf_tables_trans_destroy_work+0x439/0x830 [nf_tables]
    [  214.398983]  ? kfree+0xdb/0x280
    [  214.398983]  nf_tables_trans_destroy_work+0x5f5/0x830 [nf_tables]
    [ ... ]
    
    Fixes: bb7b40aecbf7 ("netfilter: nf_tables: bogus EBUSY in chain deletions")
    Reported by: Christoph Anton Mitterer <calestyo@scientia.net>
    Link: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=914505
    Link: https://bugzilla.kernel.org/show_bug.cgi?id=201791
    Signed-off-by: Taehee Yoo <ap420073@gmail.com>
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Signed-off-by: Sasha Levin <sashal@kernel.org>
checking 4ae6a7afae5362289cc99aa80f7d6229521888c3 ......
	 orig commit -> 009240940e84c1c089af88b454f7e804a4c5bd1b ......
		 009240940e84c1c089af88b454f7e804a4c5bd1b has problem. Fixes commit -> a9f5e78c403d2d62ade4f4c85040efc85f4049b8
checking 365e73e07fba4c343510adf49d18cb2b97337df8 ......
	 orig commit -> 732a8049f365f514d0607e03938491bf6cb0d620 ......
checking ea200cdd605662de24f7cd92e03aa6a335e0b4da ......
	 orig commit -> 8bdf164744b2c7f63561846c01cff3db597f282d ......
checking 1ea5ed0cadcae75f733d7bd870fea90d05f42528 ......
	 orig commit -> b8e9dc1c75714ceb53615743e1036f76e00f5a17 ......
checking 1d795d1241d3269bd44d4ef8cfb4da3480ab744c ......
	 orig commit -> 7a3727f385dc64773db1c144f6b15c1e9d4735bb ......
checking 78e7000fe63f32058e913daf0c9fa2cff23ea206 ......
	 orig commit -> 5e9244ff585239630f15f8ad8e676bc91a94ca9e ......
checking a1bf87cfb6ea83a262d218b2bc123a11b949caaa ......
	 orig commit -> 6fa39bc1e01dab8b4f54b23e95a181a2ed5a2d38 ......
checking af597bb61370e337eec93ae655625d3dbd1fc0bb ......
	 orig commit -> 9fcf2b3c1c0276650fea537c71b513d27d929b05 ......
checking 7d0ed747bc56ca05868423220c62e64ea525aad7 ......
	 orig commit -> 889ad63d41eea20184b0483e7e585e5b20fb6cfe ......
checking dd19ea36f5963a7160dbc4526455d2fb4d9cb516 ......
	 orig commit -> a0b2ac29415bb44d1c212184c1385a1abe68db5c ......
checking 40e2064b8fc7025cf6def10ffc5d4ebc5dc8837e ......
	 orig commit -> 08ebb6e9f4fd7098c28e0ebbb42847cf0488ebb8 ......
checking ce686c42476ec140756d3f1f16cfe8251f8d7520 ......
	 orig commit -> 819a23f83e3b2513cffbef418458a47ca02c36b3 ......
checking b141de45e2dc73d6997e6bf7b8347b688bc7c5f7 ......
	 orig commit -> 21eff69aaaa0e766ca0ce445b477698dc6a9f55a ......
checking b124a1c182fa933f579281cc650f60ac47c7026d ......
	 orig commit -> bc6cf3669d22371f573ab0305b3abf13887c0786 ......
checking 3ff8e558ba7b6f7fce1ea627c797dc03240bc40f ......
	 orig commit -> 20dcff436e9fcd2e106b0ccc48a52206bc176d70 ......
checking 2a7a8556b3b4d56e60b7e2edc57754e701ddb788 ......
	 orig commit -> 0a2bc00341dcfcc793c0dbf4f8d43adf60458b05 ......
checking c034d161fa63f35e0107b9c03d4b3108d2401a08 ......
	 orig commit -> ebec3f8f5271139df618ebdf8427e24ba102ba94 ......
checking d105fb8c88940765d9555ec921ea2e1267286628 ......
	 orig commit -> 3d63b7e4ae0dc5e02d28ddd2fa1f945defc68d81 ......
checking 716382f1c1eaca706ab694a61215b5e3416a0ea6 ......
	 orig commit -> d850c1658328e757635a46763783c6fd56390dcb ......
checking 0a7db82ed9ccbf6a85f4269a454e06e438b41b99 ......
	 orig commit -> 68816e16b4789f2d05e77b6dcb77564cf5d6a8d8 ......
checking 47adbb26373f2e89f8ef76524489a250e4608b04 ......
	 orig commit -> 1f9f9d168ce619608572b01771c47a41b15429e6 ......
checking f2e9a38558d8bbd670357922c3d06b845c8d92df ......
	 orig commit -> d2d2e3c46be5d6dd8001d0eebdf7cafb9bc7006b ......
checking 447294efb995181076c2c34e9c6bee1703c74a9a ......
	 orig commit -> 8760675932ddb614e83702117d36ea644050c609 ......
checking e80add5223dda08db1e5453a0ed4bc1175f394e9 ......
	 orig commit -> 2f839823382748664b643daa73f41ee0cc01ced6 ......
checking 15e449969537594f970c166bbe811889f2ec853b ......
	 orig commit -> 24160628a34af962ac99f2f58e547ac3c4cbd26f ......
checking 874f2a7d412ef7a30179349e9dc480f0c2429289 ......
	 orig commit -> 4a762569a2722b8a48066c7bacf0e1dc67d17fa1 ......
