Check from v4.9.91 to v4.9.92
Commit count: 29
checking f080bba272b1e3f9bbf0b6c1acef3efaf16b631d ......
checking a8f4be0168d5bf0c8838ca08301ae5341208dfba ......
	 orig commit -> 27463ad99f738ed93c7c8b3e2e5bc8c4853a2ff2 ......
checking 406996f36e01b5da0685e8e205302448b29feba3 ......
	 orig commit -> 2cc683e88c0c993ac3721d9b702cb0630abe2879 ......
checking 002f45571f6b498d417ba1dcc91bd59d386303a2 ......
	 orig commit -> 484d802d0f2f29c335563fcac2a8facf174a1bbc ......
checking 4751804da25788691602663562bbadfa5f2cb9a1 ......
	 orig commit -> a6c3d93963e4b333c764fde69802c3ea9eaa9d5c ......
checking 3426c365e7f92a538ec7b067134fc42839e75ca7 ......
	 orig commit -> 17bf8c9b3d499d5168537c98b61eb7a1fcbca6c2 ......
checking 9ff2636b3bbfcf4606d050fbbfa2f792ab566b93 ......
	 orig commit -> 1063e432bb45be209427ed3f1ca3908e4aa3c7d7 ......
checking 4593b4c08262434e8f662f12c171a9b8c85dcec4 ......
	 orig commit -> 6be687395b3124f002a653c1a50b3260222b3cd7 ......
checking a85c525bbff4d7467d7f0ab6fed8e2f787b073d6 ......
	 orig commit -> 96f413f47677366e0ae03797409bfcc4151dbf9e ......
checking b14031144e37fd5f53a6a4a1359d91b0210ca47f ......
	 orig commit -> cbcc607e18422555db569b593608aec26111cb0b ......
checking d5862b05903c8b1f49dab92683872854581b9812 ......
	 orig commit -> 6e5d58fdc9bedd0255a8781b258f10bbdc63e975 ......
checking 5f02dcec3653abb204cb23e25132f49eb314c84f ......
	 orig commit -> 2cbb4ea7de167b02ffa63e9cdfdb07a7e7094615 ......
checking 455fc99cb4e8222c40cf9ae97f4e5845bdcac17c ......
	 orig commit -> 02a2385f37a7c6594c9d89b64c4a1451276f08eb ......
checking 7d91487e4319baddd7580df4993d1478ea86ece8 ......
	 orig commit -> fa6a91e9b907231d2e38ea5ed89c537b3525df3d ......
checking c3860a3855e4445d215279561c02a7426c344949 ......
	 orig commit -> a069215cf5985f3aa1bba550264907d6bd05c5f7 ......
checking 1f7a395708b3b061109440f23e42de683a0bcdbc ......
	 orig commit -> f9db50691db4a7d860fce985f080bb3fc23a7ede ......
checking e9f83a8b4aaba8f458c244c7455f8a4ea31e8a28 ......
	 orig commit -> 00777fac28ba3e126b9e63e789a613e8bd2cab25 ......
checking 84fc2d7c220324000afb3559d9b4a0cea7066004 ......
	 orig commit -> 17cfe79a65f98abe535261856c5aef14f306dff7 ......
checking c5e6439e71ace4fb5a123b962c03a00e08c41d50 ......
	 orig commit -> 9f62c15f28b0d1d746734666d88a79f08ba1e43e ......
checking 1fdc00c1503f2164893454958cf62c3bf4eff8d6 ......
	 orig commit -> 67f93df79aeefc3add4e4b31a752600f834236e2 ......
checking 1562f147ac2b30c85ce09a86f7c480c740e6b37a ......
	 orig commit -> a560002437d3646dafccecb1bf32d1685112ddda ......
checking 28984ba0c4ec741da06fb4bb41bf7993193b27ea ......
	 orig commit -> 4dcb31d4649df36297296b819437709f5407059c ......
checking e7d7956673d986001c2a4e564133e0c4d2e3a082 ......
	 orig commit -> ca0edb131bdf1e6beaeb2b8289fd6b374b74147d ......
checking e927ffbf07c72d08d24a7eda9a1ede2d934a59fc ......
	 orig commit -> 35d889d10b649fda66121891ec05eca88150059d ......
		 35d889d10b649fda66121891ec05eca88150059d has problem. Fixes commit -> 5845f706388a4cde0f6b80f9e5d33527e942b7d9
commit 009510a90e230bb495f3fe25c7db956679263b07
Author: Sheng Lan <lansheng@huawei.com>
Date:   Thu Feb 28 18:47:58 2019 +0800

    net: netem: fix skb length BUG_ON in __skb_to_sgvec
    
    [ Upstream commit 5845f706388a4cde0f6b80f9e5d33527e942b7d9 ]
    
    It can be reproduced by following steps:
    1. virtio_net NIC is configured with gso/tso on
    2. configure nginx as http server with an index file bigger than 1M bytes
    3. use tc netem to produce duplicate packets and delay:
       tc qdisc add dev eth0 root netem delay 100ms 10ms 30% duplicate 90%
    4. continually curl the nginx http server to get index file on client
    5. BUG_ON is seen quickly
    
    [10258690.371129] kernel BUG at net/core/skbuff.c:4028!
    [10258690.371748] invalid opcode: 0000 [#1] SMP PTI
    [10258690.372094] CPU: 5 PID: 0 Comm: swapper/5 Tainted: G        W         5.0.0-rc6 #2
    [10258690.372094] RSP: 0018:ffffa05797b43da0 EFLAGS: 00010202
    [10258690.372094] RBP: 00000000000005ea R08: 0000000000000000 R09: 00000000000005ea
    [10258690.372094] R10: ffffa0579334d800 R11: 00000000000002c0 R12: 0000000000000002
    [10258690.372094] R13: 0000000000000000 R14: ffffa05793122900 R15: ffffa0578f7cb028
    [10258690.372094] FS:  0000000000000000(0000) GS:ffffa05797b40000(0000) knlGS:0000000000000000
    [10258690.372094] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
    [10258690.372094] CR2: 00007f1a6dc00868 CR3: 000000001000e000 CR4: 00000000000006e0
    [10258690.372094] Call Trace:
    [10258690.372094]  <IRQ>
    [10258690.372094]  skb_to_sgvec+0x11/0x40
    [10258690.372094]  start_xmit+0x38c/0x520 [virtio_net]
    [10258690.372094]  dev_hard_start_xmit+0x9b/0x200
    [10258690.372094]  sch_direct_xmit+0xff/0x260
    [10258690.372094]  __qdisc_run+0x15e/0x4e0
    [10258690.372094]  net_tx_action+0x137/0x210
    [10258690.372094]  __do_softirq+0xd6/0x2a9
    [10258690.372094]  irq_exit+0xde/0xf0
    [10258690.372094]  smp_apic_timer_interrupt+0x74/0x140
    [10258690.372094]  apic_timer_interrupt+0xf/0x20
    [10258690.372094]  </IRQ>
    
    In __skb_to_sgvec(), the skb->len is not equal to the sum of the skb's
    linear data size and nonlinear data size, thus BUG_ON triggered.
    Because the skb is cloned and a part of nonlinear data is split off.
    
    Duplicate packet is cloned in netem_enqueue() and may be delayed
    some time in qdisc. When qdisc len reached the limit and returns
    NET_XMIT_DROP, the skb will be retransmit later in write queue.
    the skb will be fragmented by tso_fragment(), the limit size
    that depends on cwnd and mss decrease, the skb's nonlinear
    data will be split off. The length of the skb cloned by netem
    will not be updated. When we use virtio_net NIC and invoke skb_to_sgvec(),
    the BUG_ON trigger.
    
    To fix it, netem returns NET_XMIT_SUCCESS to upper stack
    when it clones a duplicate packet.
    
    Fixes: 35d889d1 ("sch_netem: fix skb leak in netem_enqueue()")
    Signed-off-by: Sheng Lan <lansheng@huawei.com>
    Reported-by: Qin Ji <jiqin.ji@huawei.com>
    Suggested-by: Eric Dumazet <eric.dumazet@gmail.com>
    Signed-off-by: Eric Dumazet <edumazet@google.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking ad6217049ef4262b7926f4339095a41aaa7844a5 ......
	 orig commit -> d3dcf8eb615537526bd42ff27a081d46d337816e ......
checking fe3627f6761c40a408d426488fb638bc3c6a8ab7 ......
	 orig commit -> 6d066734e9f09cdea4a3b9cb76136db3f29cfb02 ......
checking 4f2f7a07dbe54458ae36c0d56fdd637f353d09b1 ......
	 orig commit -> 51d4740f88affd85d49c04e3c9cd129c0e33bcb9 ......
checking 6c9ca571a979cdd8adfb741d536916ece6a50bdf ......
	 orig commit -> f2596a9808acfd02ce1ee389f0e1c37e64aec5f6 ......
	 orig commit -> 382bd4de61827dbaaf5fb4fb7b1f4be4a86505e7 ......
		 382bd4de61827dbaaf5fb4fb7b1f4be4a86505e7 has problem. Fixes commit -> 4f8413a3a799c958f7a10a6310a451e6b8aef5ad
checking 6505dd1f7f55b180439c15d788bc5dea244a4781 ......
	 orig commit -> 48ae8484e9fc324b4968d33c585e54bc98e44d61 ......
