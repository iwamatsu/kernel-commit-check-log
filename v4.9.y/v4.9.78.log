Check from v4.9.78 to v4.9.79
Commit count: 68
checking 6c6f924f9c6294944ee6efb1bbd8cdb853582e50 ......
checking f12d0602633decf073796f3aaa59eec7ff2da9e2 ......
	 orig commit -> 1995266727fa8143897e89b55f5d3c79aa828420 ......
checking f531fbb06a56361d4a9807bbb16db4facc8537d3 ......
	 orig commit -> f37a8cb84cce18762e8f86a70bd6a49a66ab964c ......
checking 265d7657c9baf09d57eb386d0374e912e9649626 ......
	 orig commit -> 68fda450a7df51cff9e5a4d4a4d9d0d5f2589153 ......
checking 4606077802f2c6ef7aff5185d9f7d99a50784ffd ......
	 orig commit -> c366287ebd698ef5e3de300d90cd62ee9ee7373e ......
checking 5cb917aa1f1e03df9a4c29b363e3900d73508fa8 ......
	 orig commit -> be95a845cc4402272994ce290e3ad928aff06cb9 ......
checking fcabc6d008856356258f86e96bfcf3806acf9f38 ......
	 orig commit -> 7891a87efc7116590eaba57acc3c422487802c6f ......
checking a3d6dd6a66c1bf01a36926705db4687c7d0d4734 ......
	 orig commit -> 290af86629b25ffd1ed6232c4e9107da031705cb ......
		 290af86629b25ffd1ed6232c4e9107da031705cb has problem. Fixes commit -> ede95a63b5e84ddeea6b0c473b36ab8bfd8c6ce3
09584b406742413ac4c8d7e030374d4daa045b69
commit ee4bba566dda17c8d844c45dfbd8269b7d11f6fd
Author: Yonghong Song <yhs@fb.com>
Date:   Fri Feb 2 22:37:15 2018 -0800

    bpf: fix selftests/bpf test_kmod.sh failure when CONFIG_BPF_JIT_ALWAYS_ON=y
    
    [ Upstream commit 09584b406742413ac4c8d7e030374d4daa045b69 ]
    
    With CONFIG_BPF_JIT_ALWAYS_ON is defined in the config file,
    tools/testing/selftests/bpf/test_kmod.sh failed like below:
      [root@localhost bpf]# ./test_kmod.sh
      sysctl: setting key "net.core.bpf_jit_enable": Invalid argument
      [ JIT enabled:0 hardened:0 ]
      [  132.175681] test_bpf: #297 BPF_MAXINSNS: Jump, gap, jump, ... FAIL to prog_create err=-524 len=4096
      [  132.458834] test_bpf: Summary: 348 PASSED, 1 FAILED, [340/340 JIT'ed]
      [ JIT enabled:1 hardened:0 ]
      [  133.456025] test_bpf: #297 BPF_MAXINSNS: Jump, gap, jump, ... FAIL to prog_create err=-524 len=4096
      [  133.730935] test_bpf: Summary: 348 PASSED, 1 FAILED, [340/340 JIT'ed]
      [ JIT enabled:1 hardened:1 ]
      [  134.769730] test_bpf: #297 BPF_MAXINSNS: Jump, gap, jump, ... FAIL to prog_create err=-524 len=4096
      [  135.050864] test_bpf: Summary: 348 PASSED, 1 FAILED, [340/340 JIT'ed]
      [ JIT enabled:1 hardened:2 ]
      [  136.442882] test_bpf: #297 BPF_MAXINSNS: Jump, gap, jump, ... FAIL to prog_create err=-524 len=4096
      [  136.821810] test_bpf: Summary: 348 PASSED, 1 FAILED, [340/340 JIT'ed]
      [root@localhost bpf]#
    
    The test_kmod.sh load/remove test_bpf.ko multiple times with different
    settings for sysctl net.core.bpf_jit_{enable,harden}. The failed test #297
    of test_bpf.ko is designed such that JIT always fails.
    
    Commit 290af86629b2 (bpf: introduce BPF_JIT_ALWAYS_ON config)
    introduced the following tightening logic:
        ...
            if (!bpf_prog_is_dev_bound(fp->aux)) {
                    fp = bpf_int_jit_compile(fp);
        #ifdef CONFIG_BPF_JIT_ALWAYS_ON
                    if (!fp->jited) {
                            *err = -ENOTSUPP;
                            return fp;
                    }
        #endif
        ...
    With this logic, Test #297 always gets return value -ENOTSUPP
    when CONFIG_BPF_JIT_ALWAYS_ON is defined, causing the test failure.
    
    This patch fixed the failure by marking Test #297 as expected failure
    when CONFIG_BPF_JIT_ALWAYS_ON is defined.
    
    Fixes: 290af86629b2 (bpf: introduce BPF_JIT_ALWAYS_ON config)
    Signed-off-by: Yonghong Song <yhs@fb.com>
    Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
    Signed-off-by: Sasha Levin <alexander.levin@microsoft.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking 5226bb3b95515d7f6f2e1c11ac78b612e0056342 ......
	 orig commit -> 90caccdd8cc0215705f18b92771b449b01e2474a ......
checking c964ad34f6d9c5c907e5cc2f1a855d044346aa8a ......
	 orig commit -> 84ccac6e7854ebbfb56d2fc6d5bef9be49bb304c ......
checking c98ff7299b404f110167883695f81080723e6e15 ......
	 orig commit -> d5421ea43d30701e03cadc56a38854c36a8b4433 ......
checking 9f3a6cadf494f378b7839de14063793259ad5626 ......
	 orig commit -> 7e702d17ed138cf4ae7c00e8c00681ed464587c7 ......
checking dc1932c69835928dcb6259c744043dd03028cdee ......
	 orig commit -> 40d4071ce2d20840d224b4a77b5dc6f752c9ab15 ......
checking eecfa2eeefe3caef4c8d6b2284f6066c76ab26a1 ......
	 orig commit -> d0c081b49137cd3200f2023c0875723be66e7ce5 ......
checking 18717ee28ef5c0285ff969d1e9357529a8a9233f ......
	 orig commit -> 4df0bfc79904b7169dc77dcce44598b1545721f9 ......
checking 1105145cb3d5eee496de1d55aaea160c78e1c5b5 ......
	 orig commit -> 1ecdaea02ca6bfacf2ecda500dc1af51e9780c42 ......
checking 3110e2134c9718a1f3c091873769d1d9b621bb87 ......
	 orig commit -> 121d57af308d0cf943f08f4738d24d3966c38cd9 ......
checking cc99c6d59adf7daf62522b09e25af72267c997c8 ......
	 orig commit -> 128bb975dc3c25d00de04e503e2fe0a780d04459 ......
checking 1711ba166e5f7148bc41b5e24f7f282ffc055515 ......
	 orig commit -> 52acf06451930eb4cefabd5ecea56e2d46c32f76 ......
checking 00f9e47c6f9d9d25e1bf9cd5f58652d74e36d567 ......
	 orig commit -> 0171c41835591e9aa2e384b703ef9a6ae367c610 ......
checking 260eb694b5a4bd3424a7c445128fb5a784e95e3d ......
	 orig commit -> cd9ff4de0107c65d69d02253bb25d6db93c3dbc1 ......
		 cd9ff4de0107c65d69d02253bb25d6db93c3dbc1 has problem. Fixes commit -> 4b2a2bfeb3f056461a90bd621e8bd7d03fa47f60
checking 014510b11781c7ba17b4e2c25720ce15233c712f ......
	 orig commit -> 096b9854c04df86f03b38a97d40b6506e5730919 ......
checking 66c16a22e3b141152c2bc85236b48372b2b1e984 ......
	 orig commit -> 848b159835ddef99cc4193083f7e786c3992f580 ......
checking 0e52703d0746ee35326623c5442e9eec0139ffeb ......
	 orig commit -> 59b36613e85fb16ebf9feaf914570879cd5c2a21 ......
checking 2f056e7def4236bf5279da38410c93acee164d5a ......
	 orig commit -> a0ff660058b88d12625a783ce9e5c1371c87951f ......
checking 8e3534ea657e8e072e480b4a36c743458c5c852d ......
	 orig commit -> c5006b8aa74599ce19104b31d322d2ea9ff887cc ......
checking 0f51492d1bd5f7376d8175edd266b808d58df21f ......
	 orig commit -> a78e93661c5fd30b9e1dee464b2f62f966883ef7 ......
checking 1bd21b158e07e0b8c5a2ce832305a0ebfe42c480 ......
	 orig commit -> 02612bb05e51df8489db5e94d0cf8d1c81f87b0c ......
checking cf67be7a1a21c4d15593d7bacff5a59e30749b74 ......
	 orig commit -> 4ee806d51176ba7b8ff1efd81f271d7252e03a1d ......
checking a44d91150f3365968f6d83abfb76c4dd92bda168 ......
	 orig commit -> 7c68d1a6b4db9012790af7ac0f0fdc0d2083422a ......
checking 0ae16964f2154266f411b639ef101869ac3ae0b5 ......
	 orig commit -> ad23b750933ea7bf962678972a286c78a8fa36aa ......
checking 283498b4ca3534777cd28d17ebffd2e8f3fb0716 ......
	 orig commit -> a5b1379afbfabf91e3a689e82ac619a7157336b3 ......
checking c2ceff11b46e6eed2a3138811864aaa645754127 ......
	 orig commit -> 95ef498d977bf44ac094778fd448b98af158a3e6 ......
checking fb50d8c9169ee0e90cd7a733d65cb86876d795c7 ......
	 orig commit -> 749439bfac6e1a2932c582e2699f91d329658196 ......
checking 8b0d3e81cdecb92b12c9d7924749a6f62f855790 ......
	 orig commit -> e9191ffb65d8e159680ce0ad2224e1acbde6985c ......
checking 5bb5ae9718f64c3fe09f2210a7a5628055529425 ......
	 orig commit -> dd5684ecae3bd8e44b644f50e2c12c7e57fdfef5 ......
checking 5f6c581bcb3cd5a248acbbf8a91930d13d6474f1 ......
	 orig commit -> 7e040726850a106587485c21bdacc0bfc8a0cbed ......
checking 9a0be5afbfbb1d14efdc98a6615fc52082243bd1 ......
checking 1be7d46e775c2fbec57bbce7190b66fbb7c58d1b ......
	 orig commit -> 883354afbc109c57f925ccc19840055193da0cc0 ......
checking d680db722516dbf2d564d2118127270b88b1b663 ......
	 orig commit -> 6793f1c450b1533a5e9c2493490de771d38b24f9 ......
checking 42f0aba58e00aedc395460e621896532d009c64f ......
	 orig commit -> f5d07b9e98022d50720e38aa936fc11c67868ece ......
checking 19a7db1e2ef38865a704ea4dfd178b02a8026ada ......
	 orig commit -> c73322d098e4b6f5f0f0fa1330bf57e218775539 ......
checking e62b0c661f65e985327f4bc542688630265b0311 ......
	 orig commit -> 5132ede0fe8092b043dae09a7cc32b8ae7272baa ......
checking c41bb027ed63db9e7a6b2c4c3c5e2e4df1ccb8cf ......
	 orig commit -> eef9ffdf9cd39b2986367bc8395e2772bc1284ba ......
checking 7b50205cf8b9c7bd10572c97f7ca9fecfd9aec7b ......
	 orig commit -> fc3dc67471461c0efcb1ed22fb7595121d65fad9 ......
checking 0ccfbd4d6f02ff010dcc59e439f19864ad3a4efa ......
	 orig commit -> 54930dfeb46e978b447af0fb8ab4e181c1bf9d7a ......
checking b7d25282b75ea7da56ca7b1a11f7a9c4970fc5e0 ......
	 orig commit -> 08db141b5313ac2f64b844fb5725b8d81744b417 ......
checking 898eeca02a55e354c42a7aa5cdfebf16c3742f44 ......
	 orig commit -> 916a27901de01446bcf57ecca4783f6cff493309 ......
checking 2c3184ea80322347287bc7e57f782d77f478e73c ......
	 orig commit -> 4b380c42f7d00a395feede754f0bc2292eebe6e5 ......
checking 2915f16bdce204621695e7a0dfcd5f73b120cccb ......
	 orig commit -> 3b2d69114fefa474fca542e51119036dceb4aa6f ......
	 orig commit -> a23325b2e583556eae88ed3f764e457786bf4df6 ......
checking 3a53accd9c397f836858defa475720a65b5dd662 ......
	 orig commit -> c2a6bbaf0c5f90463a7011a295bbdb7e33c80b51 ......
		 c2a6bbaf0c5f90463a7011a295bbdb7e33c80b51 has problem. Fixes commit -> fdad4e7a876a2cb3d2c1f04e5418c324e79fffef
checking 542cde0e3cc27bd4d6cbfa596d9278d3c97bc193 ......
	 orig commit -> 999898355e08ae3b92dfd0a08db706e0c6703d30 ......
checking 685cce58f1c2e4fb5dbc891edf3e1bbca217ed3e ......
	 orig commit -> b050e3769c6b4013bb937e879fc43bf1847ee819 ......
checking 714c19ef57a5271c14ab6d1b5878f5662a0b3034 ......
	 orig commit -> e048cb32f69038aa1c8f11e5c1b331be4181659d ......
checking bc0e2174b092638f1146d792a8be71ab90a7e56d ......
	 orig commit -> 18365225f0440d09708ad9daade2ec11275c3df9 ......
checking c57664bd12997742da5e12556e328e1ec0b5b654 ......
	 orig commit -> 561b5e0709e4a248c67d024d4d94b6e31e3edf2f ......
checking 1d8c402e0c46ce630746e081c904068af455b1e5 ......
	 orig commit -> 55877ef45fbd7f975d078426866b7d1a2435dcc3 ......
checking f5aaa5a2836d86e3b6559200422c153a4dfb6d66 ......
	 orig commit -> fac51482577d5e05bbb0efa8d602a3c2111098bf ......
checking 318e17d09cbc40593ce42194ece3ecd1a464cc5e ......
	 orig commit -> 88d879d29f9cc0de2d930b584285638cdada6625 ......
checking 45ee9d5e97a4c6814a166c4ddf5c7c3764084270 ......
	 orig commit -> c507babf10ead4d5c8cca704539b170752a8ac84 ......
checking 41e4aa17bc02430db764b748e990bdc392347f0d ......
	 orig commit -> d4689846881d160a4d12a514e991a740bcb5d65a ......
checking 40bf2c0c1c9ec9c3a17afac43fcd18b39759defd ......
	 orig commit -> 8cb68751c115d176ec851ca56ecfbb411568c9e8 ......
checking 69e78e7214e39c084fcafdfb83b4d13d21b0008b ......
	 orig commit -> e5dfa3f902b9a642ae8c6997d57d7c41e384a90b ......
checking 853c39f239eb89cfd91ee03257c624aaac0575c6 ......
	 orig commit -> cfd6ed4537a9e938fa76facecd4b9cd65b6d1563 ......
checking ce601a07bc504b4748f8e7a34896684f79514e51 ......
	 orig commit -> 2f2d0088eb93db5c649d2a5e34a3800a8a935fc5 ......
checking 5c26ee198fcacda157918a9b211ba1f111e1ed9b ......
	 orig commit -> a0ec1ded22e6a6bc41981fae22406835b006a66e ......
checking fb39345e73141e4ae4529168965c37024cb3acb3 ......
	 orig commit -> 0afc0decf247f65b7aba666a76a0a68adf4bc435 ......
checking c36c940cd4aab393c09d457e2414423ac92bd339 ......
	 orig commit -> 1c52d859cb2d417e7216d3e56bb7fea88444cec9 ......
