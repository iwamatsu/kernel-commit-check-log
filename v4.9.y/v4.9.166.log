Check from v4.9.166 to v4.9.167
Commit count: 57
checking 21834d3e531d52c2b1f2182d472a7c37c0594f1b ......
checking cc2852a67b4066db41c71e64f0a1b3b9401a9b6e ......
	 orig commit -> 5c2a625937ba49bc691089370638223d310cda9a ......
checking 0f8d02d287217ea685e08ca94e88693c60b26858 ......
	 orig commit -> cf4df407e0d7cde60a45369c2a3414d18e2d4fdd ......
checking 2423480fcddbb4088ad51eee89caa9613d9412ef ......
	 orig commit -> 6cbcf596934c8e16d6288c7cc62dfb7ad8eadf15 ......
checking 6c751894b864eaf85e4d2cc431691653be2713c5 ......
	 orig commit -> 072684e8c58d17e853f8e8b9f6d9ce2e58d2b036 ......
checking 756e25cd669eb2a17ccc99a7de42e9022f9f5441 ......
	 orig commit -> 0cf9135b773bf32fba9dd8e6699c1b331ee4b749 ......
checking c217b3ce14434cf7b71d889d28e8741471063e68 ......
	 orig commit -> ddba91801aeb5c160b660caed1800eb3aef403f8 ......
checking 6e9a71475e5e2048434bf7e05959e21833db52c1 ......
	 orig commit -> bebd024e4815b1a170fcd21ead9c2222b23ce9e6 ......
checking ce4fbb9f4ee472a7b50431b134a0bab26fca922e ......
	 orig commit -> 206b92353c839c0b27a0b9bec24195f93fd6cf7a ......
checking 32b6e8c96f1263c2232cf0c21a16525dff7d1189 ......
	 orig commit -> f3b4e06b3bda759afd042d3d5fa86bea8f1fe278 ......
checking 94502785ef270d53e2e475f902d875d35b060f13 ......
	 orig commit -> 40fc165304f0faaae78b761f8ee30b5d216b1850 ......
checking 1137f3f8265d7b9ff2886b2a62242ba22deb7130 ......
	 orig commit -> 238e0268c82789e4c107a37045d529a6dbce51a9 ......
checking e8d3f4b0d4e01460e15ebafed0288675266d2a71 ......
	 orig commit -> c5bc6e526d3f217ed2cc3681d256dc4a2af4cc2b ......
checking 28f0641fbaa06dccf49903bb074ac7b3aa3dde85 ......
	 orig commit -> 23da9588037ecdd4901db76a5b79a42b529c4ec3 ......
		 23da9588037ecdd4901db76a5b79a42b529c4ec3 has problem. Fixes commit -> 89189557b47b35683a27c80ee78aef18248eefb4
commit 9f3a14bebe4e2eebb751fd84a747778adc8a435d
Author: YueHaibing <yuehaibing@huawei.com>
Date:   Thu Apr 25 22:24:05 2019 -0700

    fs/proc/proc_sysctl.c: Fix a NULL pointer dereference
    
    commit 89189557b47b35683a27c80ee78aef18248eefb4 upstream.
    
    Syzkaller report this:
    
      sysctl could not get directory: /net//bridge -12
      kasan: CONFIG_KASAN_INLINE enabled
      kasan: GPF could be caused by NULL-ptr deref or user memory access
      general protection fault: 0000 [#1] SMP KASAN PTI
      CPU: 1 PID: 7027 Comm: syz-executor.0 Tainted: G         C        5.1.0-rc3+ #8
      Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.10.2-1ubuntu1 04/01/2014
      RIP: 0010:__write_once_size include/linux/compiler.h:220 [inline]
      RIP: 0010:__rb_change_child include/linux/rbtree_augmented.h:144 [inline]
      RIP: 0010:__rb_erase_augmented include/linux/rbtree_augmented.h:186 [inline]
      RIP: 0010:rb_erase+0x5f4/0x19f0 lib/rbtree.c:459
      Code: 00 0f 85 60 13 00 00 48 89 1a 48 83 c4 18 5b 5d 41 5c 41 5d 41 5e 41 5f c3 48 89 f2 48 b8 00 00 00 00 00 fc ff df 48 c1 ea 03 <80> 3c 02 00 0f 85 75 0c 00 00 4d 85 ed 4c 89 2e 74 ce 4c 89 ea 48
      RSP: 0018:ffff8881bb507778 EFLAGS: 00010206
      RAX: dffffc0000000000 RBX: ffff8881f224b5b8 RCX: ffffffff818f3f6a
      RDX: 000000000000000a RSI: 0000000000000050 RDI: ffff8881f224b568
      RBP: 0000000000000000 R08: ffffed10376a0ef4 R09: ffffed10376a0ef4
      R10: 0000000000000001 R11: ffffed10376a0ef4 R12: ffff8881f224b558
      R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000
      FS:  00007f3e7ce13700(0000) GS:ffff8881f7300000(0000) knlGS:0000000000000000
      CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
      CR2: 00007fd60fbe9398 CR3: 00000001cb55c001 CR4: 00000000007606e0
      DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
      DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
      PKRU: 55555554
      Call Trace:
       erase_entry fs/proc/proc_sysctl.c:178 [inline]
       erase_header+0xe3/0x160 fs/proc/proc_sysctl.c:207
       start_unregistering fs/proc/proc_sysctl.c:331 [inline]
       drop_sysctl_table+0x558/0x880 fs/proc/proc_sysctl.c:1631
       get_subdir fs/proc/proc_sysctl.c:1022 [inline]
       __register_sysctl_table+0xd65/0x1090 fs/proc/proc_sysctl.c:1335
       br_netfilter_init+0x68/0x1000 [br_netfilter]
       do_one_initcall+0xbc/0x47d init/main.c:901
       do_init_module+0x1b5/0x547 kernel/module.c:3456
       load_module+0x6405/0x8c10 kernel/module.c:3804
       __do_sys_finit_module+0x162/0x190 kernel/module.c:3898
       do_syscall_64+0x9f/0x450 arch/x86/entry/common.c:290
       entry_SYSCALL_64_after_hwframe+0x49/0xbe
      Modules linked in: br_netfilter(+) backlight comedi(C) hid_sensor_hub max3100 ti_ads8688 udc_core fddi snd_mona leds_gpio rc_streamzap mtd pata_netcell nf_log_common rc_winfast udp_tunnel snd_usbmidi_lib snd_usb_toneport snd_usb_line6 snd_rawmidi snd_seq_device snd_hwdep videobuf2_v4l2 videobuf2_common videodev media videobuf2_vmalloc videobuf2_memops rc_gadmei_rm008z 8250_of smm665 hid_tmff hid_saitek hwmon_vid rc_ati_tv_wonder_hd_600 rc_core pata_pdc202xx_old dn_rtmsg as3722 ad714x_i2c ad714x snd_soc_cs4265 hid_kensington panel_ilitek_ili9322 drm drm_panel_orientation_quirks ipack cdc_phonet usbcore phonet hid_jabra hid extcon_arizona can_dev industrialio_triggered_buffer kfifo_buf industrialio adm1031 i2c_mux_ltc4306 i2c_mux ipmi_msghandler mlxsw_core snd_soc_cs35l34 snd_soc_core snd_pcm_dmaengine snd_pcm snd_timer ac97_bus snd_compress snd soundcore gpio_da9055 uio ecdh_generic mdio_thunder of_mdio fixed_phy libphy mdio_cavium iptable_security iptable_raw iptable_mangle
       iptable_nat nf_nat nf_conntrack nf_defrag_ipv6 nf_defrag_ipv4 iptable_filter bpfilter ip6_vti ip_vti ip_gre ipip sit tunnel4 ip_tunnel hsr veth netdevsim vxcan batman_adv cfg80211 rfkill chnl_net caif nlmon dummy team bonding vcan bridge stp llc ip6_gre gre ip6_tunnel tunnel6 tun joydev mousedev ppdev tpm kvm_intel kvm irqbypass crct10dif_pclmul crc32_pclmul crc32c_intel ghash_clmulni_intel aesni_intel ide_pci_generic piix aes_x86_64 crypto_simd cryptd ide_core glue_helper input_leds psmouse intel_agp intel_gtt serio_raw ata_generic i2c_piix4 agpgart pata_acpi parport_pc parport floppy rtc_cmos sch_fq_codel ip_tables x_tables sha1_ssse3 sha1_generic ipv6 [last unloaded: br_netfilter]
      Dumping ftrace buffer:
         (ftrace buffer empty)
      ---[ end trace 68741688d5fbfe85 ]---
    
    commit 23da9588037e ("fs/proc/proc_sysctl.c: fix NULL pointer
    dereference in put_links") forgot to handle start_unregistering() case,
    while header->parent is NULL, it calls erase_header() and as seen in the
    above syzkaller call trace, accessing &header->parent->root will trigger
    a NULL pointer dereference.
    
    As that commit explained, there is also no need to call
    start_unregistering() if header->parent is NULL.
    
    Link: http://lkml.kernel.org/r/20190409153622.28112-1-yuehaibing@huawei.com
    Fixes: 23da9588037e ("fs/proc/proc_sysctl.c: fix NULL pointer dereference in put_links")
    Fixes: 0e47c99d7fe25 ("sysctl: Replace root_list with links between sysctl_table_sets")
    Signed-off-by: YueHaibing <yuehaibing@huawei.com>
    Reported-by: Hulk Robot <hulkci@huawei.com>
    Reviewed-by: Kees Cook <keescook@chromium.org>
    Cc: Luis Chamberlain <mcgrof@kernel.org>
    Cc: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Al Viro <viro@zeniv.linux.org.uk>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking 9b06a0b2682fa6d2820d0c36d32499f82a893f8f ......
	 orig commit -> 3ec8002951ea173e24b466df1ea98c56b7920e63 ......
checking 7cd36564f6c2d17128fd3c640bd9ed9ddab13c4e ......
	 orig commit -> 84f3b43f7378b98b7e3096d5499de75183d4347c ......
checking 4ac639f21485d5d738ce930a0c907d4f9250c449 ......
	 orig commit -> f8df5c2c3e2df5ffaf9fb5503da93d477a8c7db4 ......
checking bc9b45861deb0d7d8f8a91eca35dea0466825a85 ......
	 orig commit -> 2908b076f5198d231de62713cb2b633a3a4b95ac ......
checking 0e53054025b03f2ba697655c47eda97b5b405a94 ......
	 orig commit -> 422c2537ba9d42320f8ab6573940269f87095320 ......
checking f97285b3b6236c1dee4655d6c10df66b9bcafee9 ......
	 orig commit -> a595ecdd5f60b2d93863cebb07eec7f935839b54 ......
checking 2c90192ab046d07859f05cb8f028caac81873f98 ......
	 orig commit -> 93bcefd4c6bad4c69dbc4edcd3fbf774b24d930d ......
checking 110ee901b3e1cca327687254577f5dd6a5efc00d ......
	 orig commit -> 3a10e3dd52e80b9a97a3346020024d17b2c272d6 ......
checking edb52700e6d70deb7ecf810562ebeda3fceca225 ......
	 orig commit -> 3b9c2f2e0e99bb67c96abcb659b3465efe3bee1f ......
checking b2dadb85fafa8d1e1efefcb752cb967acde7df04 ......
	 orig commit -> cc26358f89c3e493b54766b1ca56cfc6b14db78a ......
checking 8c9a96eb266af66dad1ff03496602fc9bad627e0 ......
	 orig commit -> bafd9c64056cd034a1174dcadb65cd3b294ff8f6 ......
checking fe186fdd1a45b5e33dd85f7bf63e70049f99b230 ......
	 orig commit -> c85be041065c0be8bc48eda4c45e0319caf1d0e5 ......
checking 727b8577d543a9cff6f5ad39f9347ff267e33311 ......
	 orig commit -> 242ec1455151267fe35a0834aa9038e4c4670884 ......
checking a63e13426cc6a0b9757b493285f8064872b38431 ......
	 orig commit -> fe67888fc007a76b81e37da23ce5bd8fb95890b0 ......
checking 840408957a8a5bfb96382beb8efda1d1a04527e3 ......
	 orig commit -> 1d5de5bd311be7cd54f02f7cd164f0349a75c876 ......
checking 6c6e8cc1b44bc23addbe76316ec6c6a86840f729 ......
	 orig commit -> c14a57264399efd39514a2329c591a4b954246d8 ......
checking 7d7637dafc59595230ff6165ead072cd15154a61 ......
	 orig commit -> 73601ea5b7b18eb234219ae2adf77530f389da79 ......
checking be0c268f43b80ef10e38d3dbc1bb5c75cdb291fb ......
	 orig commit -> 113ce08109f8e3b091399e7cc32486df1cff48e7 ......
checking a1eb297f4137c291b838ac67ac1bedf518bcc855 ......
	 orig commit -> ca0214ee2802dd47239a4e39fb21c5b00ef61b22 ......
checking e308b103ba362ac473251289495b755b4ee2a8d5 ......
	 orig commit -> c709f14f0616482b67f9fbcb965e1493a03ff30b ......
checking c84a7647520fdf933d978d0202bc2d67374756ff ......
	 orig commit -> 2b1d9c8f87235f593826b9cf46ec10247741fff9 ......
checking c9416ce92003b7dc48671af2654abffc2250ecd6 ......
	 orig commit -> 1eec7151ae0e134bd42e3f128066b2ff8da21393 ......
checking 22a8711fa5aa63ff9e848c47299311f8c64c9955 ......
	 orig commit -> 0cb98abb5bd13b9a636bde603d952d722688b428 ......
checking 91f81cb5c58368d47b1a508c3a11825c70a6f1ba ......
	 orig commit -> 86be36f6502c52ddb4b85938145324fd07332da1 ......
checking 0e14614b7fd6c4a23baf343754a38191f6ee0c4b ......
	 orig commit -> 91740fc8242b4f260cfa4d4536d8551804777fae ......
checking 5ca18600aa2239ab7e1f7fccf8b1ebd373e9ae72 ......
	 orig commit -> 3897b6f0a859288c22fb793fad11ec2327e60fcd ......
checking 44f705e9d8568fd9e76e08185cd1ba67559243ed ......
	 orig commit -> 2cc8334270e281815c3850c3adea363c51f21e0d ......
checking 7b5f260ff73f28143fff4b22aa7067d9a6b22aa4 ......
	 orig commit -> 9180bb4f046064dfa4541488102703b402bb04e1 ......
checking 6f0f3657ec45944f9204df95f18c97bc875ba1d9 ......
	 orig commit -> 4477138fa0ae4e1b699786ef0600863ea6e6c61c ......
		 4477138fa0ae4e1b699786ef0600863ea6e6c61c has problem. Fixes commit -> 9180bb4f046064dfa4541488102703b402bb04e1
commit 7b5f260ff73f28143fff4b22aa7067d9a6b22aa4
Author: Eric Dumazet <edumazet@google.com>
Date:   Sat Mar 16 13:09:53 2019 -0700

    tun: add a missing rcu_read_unlock() in error path
    
    commit 9180bb4f046064dfa4541488102703b402bb04e1 upstream.
    
    In my latest patch I missed one rcu_read_unlock(), in case
    device is down.
    
    Fixes: 4477138fa0ae ("tun: properly test for IFF_UP")
    Signed-off-by: Eric Dumazet <edumazet@google.com>
    Reported-by: syzbot <syzkaller@googlegroups.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking b731b5d0e134a2fbee5b37f1964cd50670e7275a ......
	 orig commit -> bb9e5c5bcd76f4474eac3baf643d7a39f7bac7bb ......
checking 4f05457010d17012a3af167539f54c68ce6a68cc ......
	 orig commit -> 273160ffc6b993c7c91627f5a84799c66dfe4dee ......
checking 5da9828c58655cc4608a1c421a802a7985456380 ......
	 orig commit -> cc4807bb609230d8959fd732b0bf3bd4c2de8eac ......
checking 5018d910bce287546de1e75e78196ebd27ff0b41 ......
	 orig commit -> 89e4130939a20304f4059ab72179da81f5347528 ......
checking 936a9180e81763a368adb92b6235edd5d5a67ca1 ......
	 orig commit -> a4dc6a49156b1f8d6e17251ffda17c9e6a5db78a ......
checking 65a1ff925de6a83c33e15f4160a858ceee093a30 ......
	 orig commit -> e5dcc0c3223c45c94100f05f28d8ef814db3d82c ......
checking 49190e418795b9bdcd31497f2d0a6687be536bad ......
	 orig commit -> 398f0132c14754fcd03c1c4f8e7176d001ce8ea1 ......
checking 5291fcb312278a2bf1aeedeee6882384e863c4e4 ......
	 orig commit -> fae846e2b7124d4b076ef17791c73addf3b26350 ......
checking dc8390f9de1455cb96287c6c3cc4e133f103c58c ......
	 orig commit -> e0aa67709f89d08c8d8e5bdd9e0b649df61d0090 ......
checking c6f9eda378883668571f94fb8b7ec4a0d76772ef ......
	 orig commit -> a830405ee452ddc4101c3c9334e6fedd42c6b357 ......
checking 9406040f3c2df634cd1bdfacbdc9771ea2ad163e ......
	 orig commit -> 4ef8c1c93f848e360754f10eb2e7134c872b6597 ......
checking 270fdb1911521e482c0254d75fd6b13bea4607d8 ......
	 orig commit -> ace6033ec5c356615eaa3582fb1946e9eaff6662 ......
checking 99665dcf6ff803351b5e658f3a929cb498561e36 ......
	 orig commit -> 7c9cbd0b5e38a1672fcd137894ace3b042dfbf69 ......
checking def5c1fbee851e9c044ce9fa647238efc15458b4 ......
	 orig commit -> af3d5d1c87664a4f150fcf3534c6567cb19909b0 ......
