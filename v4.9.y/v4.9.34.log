Check from v4.9.34 to v4.9.35
Commit count: 45
checking 92905e331aea278665c4b27fbb13c4547a8bcbb0 ......
checking 855b08e57777f54a7f26563a3061a385f6d04ebc ......
	 orig commit -> 35abcd4f9f303ac4f10f99b3f7e993e5f2e6fa37 ......
checking 21eaaa76b701df5becdc6163cb88eeb7915ba629 ......
	 orig commit -> 7292ae3d5a18fb922be496e6bb687647193569b4 ......
checking ffa96c1a6afe251d667ae9a9d83f1ef87c3b029e ......
	 orig commit -> 898805e0cdf7fd860ec21bf661d3a0285a3defbd ......
checking 5da6415e427beaca48ae4f0d7385e2bcdba5b308 ......
	 orig commit -> 833bfade96561216aa2129516a5926a0326860a2 ......
checking 25c7794ed046e9190200983e330f221170cb2b0a ......
	 orig commit -> 2201ac6129fa162ac24da089a034bb0971648ebb ......
checking 81135c71bde3346a39cec07b4a0b5de1f5fabdf1 ......
	 orig commit -> bb1a619735b4660f21bce3e728b937640024b4ad ......
checking 948c4f17ab7ed9342e3dfdff88bb31266fe72790 ......
	 orig commit -> 6232c17438ed01f43665197db5a98a4a4f77ef47 ......
checking 225969acc0f15aa2bc34602889ce040d4b51f2d4 ......
	 orig commit -> b7f73850bb4fac1e2209a4dd5e636d39be92f42c ......
checking 5306119473b2dceb63de2e1aa0e6b81de432d039 ......
	 orig commit -> 807c16253319ee6ccf8873ae64f070f7eb532cd5 ......
checking dcd015f733a74552eeefc5d70f55125c33eaa5d2 ......
	 orig commit -> 3ec754410cb3e931a6c4920b1a150f21a94a2bf4 ......
checking f2060387421109ac389dd209355918b566fc6f84 ......
	 orig commit -> 5f2f97656ada8d811d3c1bef503ced266fcd53a0 ......
checking 581659a878200a4e2c15548e3df6a7b82e170cb8 ......
	 orig commit -> 52b482b0f4fd6d5267faf29fe91398e203f3c230 ......
checking 217e035d5120de80a6b2224878e157ebb4a390b8 ......
	 orig commit -> 05b4017b37f1fce4b7185f138126dd8decdb381f ......
checking e4b8d1e8441003ee4e3e68f5cc0296e8e5d5e61f ......
	 orig commit -> acfd6ee4fa7ebeee75511825fe02be3f7ac1d668 ......
checking 61ea7c2817bdcdef0f5240b180d1cc073a2c4388 ......
	 orig commit -> 4eb59793cca00b0e629b6d55b5abb5acb82c5868 ......
checking 3900f24aa6fac681b2c141a6e359c0cd1fed9676 ......
	 orig commit -> abb85a9b512e8ca7ad04a5a8a6db9664fe644974 ......
	 orig commit -> c72c5250224d475614a00c1d7e54a67f77cd3410 ......
checking 463440e6de4a53e9441c5aadb027d4ab5ea2a3c8 ......
	 orig commit -> 105fa2f44e504c830697b0c794822112d79808dc ......
checking 1f576d53d854b336affc844c616055b518e53bff ......
	 orig commit -> 73d4e580ccc5c3e05cea002f18111f66c9c07034 ......
checking 99f66b5182a4f3d89563634f2fe156d4629b9c10 ......
	 orig commit -> dbb236c1ceb697a559e0694ac4c9e7b9131d0b16 ......
checking a53bfdda06ac114c42796b4193aee10a8108bca1 ......
	 orig commit -> 3d88d56c5873f6eebe23e05c3da701960146b801 ......
checking 02a37ccd6347897b9227c8ff7f11526321ec2048 ......
	 orig commit -> ceea5e3771ed2378668455fa21861bead7504df5 ......
checking c81d034bd09aeac70ad0e0a51d281659fff304a8 ......
	 orig commit -> 7a51461fc2da82a6c565a3ee65c41c197f28225d ......
		 7a51461fc2da82a6c565a3ee65c41c197f28225d has problem. Fixes commit -> 5c3de777bdaf48bd0cfb43097c0d0fb85056cab7
commit 4a70f07da85313aa817c0888d2b623ea30cbbbe5
Author: Arend Van Spriel <arend.vanspriel@broadcom.com>
Date:   Sat Nov 25 21:39:25 2017 +0100

    brcmfmac: change driver unbind order of the sdio function devices
    
    commit 5c3de777bdaf48bd0cfb43097c0d0fb85056cab7 upstream.
    
    In the function brcmf_sdio_firmware_callback() the driver is
    unbound from the sdio function devices in the error path.
    However, the order in which it is done resulted in a use-after-free
    issue (see brcmf_ops_sdio_remove() in bcmsdh.c). Hence change
    the order and first unbind sdio function #2 device and then
    unbind sdio function #1 device.
    
    Fixes: 7a51461fc2da ("brcmfmac: unbind all devices upon failure in firmware callback")
    Reported-by: Stefan Wahren <stefan.wahren@i2se.com>
    Reviewed-by: Hante Meuleman <hante.meuleman@broadcom.com>
    Reviewed-by: Pieter-Paul Giesberts <pieter-paul.giesberts@broadcom.com>
    Reviewed-by: Franky Lin <franky.lin@broadcom.com>
    Signed-off-by: Arend van Spriel <arend.vanspriel@broadcom.com>
    Signed-off-by: Kalle Valo <kvalo@codeaurora.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking ba2d8d67875c67fdbd676a3990bbf99064826b03 ......
	 orig commit -> 03fb0e8393fae8ebb6710a99387853ed0becbc8e ......
checking 1dd15bd62221be131279340d2b91a3b993365a72 ......
	 orig commit -> 6d0507a777fbc533f7f1bf5664a81982dd50dece ......
		 6d0507a777fbc533f7f1bf5664a81982dd50dece has problem. Fixes commit -> 35abcd4f9f303ac4f10f99b3f7e993e5f2e6fa37
commit 855b08e57777f54a7f26563a3061a385f6d04ebc
Author: Arend Van Spriel <arend.vanspriel@broadcom.com>
Date:   Fri Jun 16 09:36:35 2017 +0100

    brcmfmac: fix uninitialized warning in brcmf_usb_probe_phase2()
    
    commit 35abcd4f9f303ac4f10f99b3f7e993e5f2e6fa37 upstream.
    
    This fixes the following warning:
    
      drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c: In function
      'brcmf_usb_probe_phase2':
      drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c:1198:2:
      warning: 'devinfo' may be used uninitialized in this function
      [-Wmaybe-uninitialized]
        mutex_unlock(&devinfo->dev_init_lock);
    
    Fixes: 6d0507a777fb ("brcmfmac: add parameter to pass error code in firmware callback")
    Cc: Stephen Rothwell <sfr@canb.auug.org.au>
    Reported-by: Kalle Valo <kvalo@codeaurora.org>
    Signed-off-by: Arend van Spriel <arend.vanspriel@broadcom.com>
    Signed-off-by: Kalle Valo <kvalo@codeaurora.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking 20d8f785f9749a9fb4522ff255a7df60b2314cb2 ......
	 orig commit -> 817ae460c784f32cd45e60b2b1b21378c3c6a847 ......
checking 8eaa481dfb4c405abe02000662ad4e1d7c48f742 ......
	 orig commit -> d89ba5353f301971dd7d2f9fdf25c4432728f38e ......
checking 414f51ceb6ffbdd66e185357e40d59832cc33433 ......
	 orig commit -> a9f8553e935f26cb5447f67e280946b0923cd2dc ......
checking f719f20abe2a52fff61ffc3b230308279b841475 ......
	 orig commit -> 57db7e4a2d92c2d3dfbca4ef8057849b2682436b ......
checking 99afebe8fef928457b931f2d596168240ea5e328 ......
	 orig commit -> 3db28271f0feae129262d30e41384a7c4c767987 ......
checking cdf300d6105d8d95cb7821476cd84c47d0192623 ......
	 orig commit -> dec6b33163d24e2c19ba521c89fffbaab53ae986 ......
checking fb6dc831b5cfdf8faa9255d6dd7b9b1b1265921d ......
	 orig commit -> dcd87838c06f05ab7650b249ebf0d5b57ae63e1e ......
checking 2f1527e359f4245bfaf9c3047427f3a2abcdb508 ......
	 orig commit -> ca8efa1df1d15a1795a2da57f9f6aada6ed6b946 ......
checking 468aa930c0a299f07ee449fd9c204d48852af372 ......
	 orig commit -> 46a704f8409f79fd66567ad3f8a7304830a84293 ......
		 46a704f8409f79fd66567ad3f8a7304830a84293 has problem. Fixes commit -> e47057151422a67ce08747176fa21cb3b526a2c9
commit d745f0f67b70afafd4d5f300ec422dae26bbd938
Author: Paul Mackerras <paulus@ozlabs.org>
Date:   Fri Jul 21 13:57:14 2017 +1000

    KVM: PPC: Book3S HV: Enable TM before accessing TM registers
    
    commit e47057151422a67ce08747176fa21cb3b526a2c9 upstream.
    
    Commit 46a704f8409f ("KVM: PPC: Book3S HV: Preserve userspace HTM state
    properly", 2017-06-15) added code to read transactional memory (TM)
    registers but forgot to enable TM before doing so.  The result is
    that if userspace does have live values in the TM registers, a KVM_RUN
    ioctl will cause a host kernel crash like this:
    
    [  181.328511] Unrecoverable TM Unavailable Exception f60 at d00000001e7d9980
    [  181.328605] Oops: Unrecoverable TM Unavailable Exception, sig: 6 [#1]
    [  181.328613] SMP NR_CPUS=2048
    [  181.328613] NUMA
    [  181.328618] PowerNV
    [  181.328646] Modules linked in: vhost_net vhost tap nfs_layout_nfsv41_files rpcsec_gss_krb5 nfsv4 dns_resolver nfs
    +fscache xt_CHECKSUM iptable_mangle ipt_MASQUERADE nf_nat_masquerade_ipv4 iptable_nat nf_nat_ipv4 nf_nat
    +nf_conntrack_ipv4 nf_defrag_ipv4 xt_conntrack nf_conntrack ipt_REJECT nf_reject_ipv4 tun ebtable_filter ebtables
    +ip6table_filter ip6_tables iptable_filter bridge stp llc kvm_hv kvm nfsd ses enclosure scsi_transport_sas ghash_generic
    +auth_rpcgss gf128mul xts sg ctr nfs_acl lockd vmx_crypto shpchp ipmi_powernv i2c_opal grace ipmi_devintf i2c_core
    +powernv_rng sunrpc ipmi_msghandler ibmpowernv uio_pdrv_genirq uio leds_powernv powernv_op_panel ip_tables xfs sd_mod
    +lpfc ipr bnx2x libata mdio ptp pps_core scsi_transport_fc libcrc32c dm_mirror dm_region_hash dm_log dm_mod
    [  181.329278] CPU: 40 PID: 9926 Comm: CPU 0/KVM Not tainted 4.12.0+ #1
    [  181.329337] task: c000003fc6980000 task.stack: c000003fe4d80000
    [  181.329396] NIP: d00000001e7d9980 LR: d00000001e77381c CTR: d00000001e7d98f0
    [  181.329465] REGS: c000003fe4d837e0 TRAP: 0f60   Not tainted  (4.12.0+)
    [  181.329523] MSR: 9000000000009033 <SF,HV,EE,ME,IR,DR,RI,LE>
    [  181.329527]   CR: 24022448  XER: 00000000
    [  181.329608] CFAR: d00000001e773818 SOFTE: 1
    [  181.329608] GPR00: d00000001e77381c c000003fe4d83a60 d00000001e7ef410 c000003fdcfe0000
    [  181.329608] GPR04: c000003fe4f00000 0000000000000000 0000000000000000 c000003fd7954800
    [  181.329608] GPR08: 0000000000000001 c000003fc6980000 0000000000000000 d00000001e7e2880
    [  181.329608] GPR12: d00000001e7d98f0 c000000007b19000 00000001295220e0 00007fffc0ce2090
    [  181.329608] GPR16: 0000010011886608 00007fff8c89f260 0000000000000001 00007fff8c080028
    [  181.329608] GPR20: 0000000000000000 00000100118500a6 0000010011850000 0000010011850000
    [  181.329608] GPR24: 00007fffc0ce1b48 0000010011850000 00000000d673b901 0000000000000000
    [  181.329608] GPR28: 0000000000000000 c000003fdcfe0000 c000003fdcfe0000 c000003fe4f00000
    [  181.330199] NIP [d00000001e7d9980] kvmppc_vcpu_run_hv+0x90/0x6b0 [kvm_hv]
    [  181.330264] LR [d00000001e77381c] kvmppc_vcpu_run+0x2c/0x40 [kvm]
    [  181.330322] Call Trace:
    [  181.330351] [c000003fe4d83a60] [d00000001e773478] kvmppc_set_one_reg+0x48/0x340 [kvm] (unreliable)
    [  181.330437] [c000003fe4d83b30] [d00000001e77381c] kvmppc_vcpu_run+0x2c/0x40 [kvm]
    [  181.330513] [c000003fe4d83b50] [d00000001e7700b4] kvm_arch_vcpu_ioctl_run+0x114/0x2a0 [kvm]
    [  181.330586] [c000003fe4d83bd0] [d00000001e7642f8] kvm_vcpu_ioctl+0x598/0x7a0 [kvm]
    [  181.330658] [c000003fe4d83d40] [c0000000003451b8] do_vfs_ioctl+0xc8/0x8b0
    [  181.330717] [c000003fe4d83de0] [c000000000345a64] SyS_ioctl+0xc4/0x120
    [  181.330776] [c000003fe4d83e30] [c00000000000b004] system_call+0x58/0x6c
    [  181.330833] Instruction dump:
    [  181.330869] e92d0260 e9290b50 e9290108 792807e3 41820058 e92d0260 e9290b50 e9290108
    [  181.330941] 792ae8a4 794a1f87 408204f4 e92d0260 <7d4022a6> f9490ff0 e92d0260 7d4122a6
    [  181.331013] ---[ end trace 6f6ddeb4bfe92a92 ]---
    
    The fix is just to turn on the TM bit in the MSR before accessing the
    registers.
    
    Fixes: 46a704f8409f ("KVM: PPC: Book3S HV: Preserve userspace HTM state properly")
    Reported-by: Jan Stancek <jstancek@redhat.com>
    Tested-by: Jan Stancek <jstancek@redhat.com>
    Signed-off-by: Paul Mackerras <paulus@ozlabs.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
checking df3a787b3a71ec9dffddad9704e28a809fa9fdc7 ......
	 orig commit -> addb63c18a0d52a9ce2611d039f981f7b6148d2b ......
checking 5220378bd91c081d2371070cedccffcb7008f1bf ......
	 orig commit -> fb3a5055cd7098f8d1dd0cd38d7172211113255f ......
checking 7c679fe729c258f09f169d9e3f8551b6e91d97e2 ......
	 orig commit -> a91e0f680bcd9e10c253ae8b62462a38bd48f09f ......
checking bc6eecff3d9594b2d5b9f41d4b480dba720e00ca ......
	 orig commit -> 9fa4eb8e490a28de40964b1b0e583d8db4c7e57c ......
checking 4b660fcbc64ebd8a9a0acd12f15e3dc1ab0480b2 ......
	 orig commit -> bf05fc25f268cd62f147f368fe65ad3e5b04fe9f ......
checking 3d6848e491df6abbf5fb5b1fabb7a5df2e2b8f4f ......
	 orig commit -> 98da7d08850fb8bdeb395d6368ed15753304aa0c ......
checking 552a14a572a21cac91d190b38ac1a8aba9730f35 ......
	 orig commit -> 2deaeaf102d692cb6f764123b1df7aa118a8e97c ......
checking 8c9c55a0f5764337ff4429ae6e15c3b6a45d1124 ......
	 orig commit -> 4a9bfafc64f44ef83de4e00ca1b57352af6cd8c2 ......
checking 4ae2cb91a6365a6472fad7f04785cc0420ea5ada ......
	 orig commit -> 089bc0143f489bd3a4578bdff5f4ca68fb26f341 ......
checking e5c49c1703ae906a8f41f58aabd5258a06fc9e6d ......
	 orig commit -> 46464411307746e6297a034a9983a22c9dfc5a0c ......
checking 0e051f17bd048d96eb533f1b8f436f3b27c6109b ......
	 orig commit -> 38b8f823864707eb1cf331d2247608c419ed388c ......
