Check from v4.9.105 to v4.9.106
Commit count: 31
checking 2460c23c35e9a612395b4108dbc19f3c1f016d43 ......
checking 6464206844f5201dbe757a95f11b77e98965174c ......
	 orig commit -> 4e4636cf981b5b629fbfb78aa9f232e015f7d521 ......
checking 10d15c48ad691581a2d5c0f07943724c57bef46f ......
checking 269e5906328a6606c893caa8451ecd5b672b0733 ......
checking c310c7b2697d446b81543646fbe7cbb2a085bda2 ......
checking 935893a17a99e8ce5ff2e3a7cd1bcd0e79d30872 ......
	 orig commit -> c207aee48037abca71c669cbec407b9891965c34 ......
checking 9aebb3d3a03843d6e7810bacac72caeb53904a70 ......
	 orig commit -> 0afd0d9e0e7879d666c1df2fa1bea4d8716909fe ......
checking 603a2cdf1066d6bd45c0ed5d1adb7bb437213958 ......
	 orig commit -> 7dec80ccbe310fb7e225bf21c48c672bb780ce7b ......
checking 48dc537b22bc5e29964038b83dfedec72f34612c ......
	 orig commit -> 6f5ec2993b1f39aed12fa6fd56e8dc2272ee8a33 ......
checking 7cd91856f5c5fe3586f0764b4b3e57ca4da5b40f ......
	 orig commit -> fd35c88b74170d9335530d9abf271d5d73eb5401 ......
checking 1f7f88aa4df593db34dd1d6345213f20888687fb ......
	 orig commit -> 13810435b9a7014fb92eb715f77da488f3b65b99 ......
		 13810435b9a7014fb92eb715f77da488f3b65b99 has problem. Fixes commit -> 22566c1603030f0a036ad564634b064ad1a55db2
0b9301fb632f7111a3293a30cc5b20f1b82ed08d
cd77849a69cf5d81a86dd88dac7a594a67cb5c87
commit 779f4eecbcecc941cfa93d135570eb45c61ee7e6
Author: Artem Savkov <asavkov@redhat.com>
Date:   Tue Nov 20 11:52:16 2018 -0600

    objtool: Fix segfault in .cold detection with -ffunction-sections
    
    [ Upstream commit 22566c1603030f0a036ad564634b064ad1a55db2 ]
    
    Because find_symbol_by_name() traverses the same lists as
    read_symbols(), changing sym->name in place without copying it affects
    the result of find_symbol_by_name().  In the case where a ".cold"
    function precedes its parent in sec->symbol_list, it can result in a
    function being considered a parent of itself. This leads to function
    length being set to 0 and other consequent side-effects including a
    segfault in add_switch_table().  The effects of this bug are only
    visible when building with -ffunction-sections in KCFLAGS.
    
    Fix by copying the search string instead of modifying it in place.
    
    Signed-off-by: Artem Savkov <asavkov@redhat.com>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Linus Torvalds <torvalds@linux-foundation.org>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: 13810435b9a7 ("objtool: Support GCC 8's cold subfunctions")
    Link: http://lkml.kernel.org/r/910abd6b5a4945130fd44f787c24e07b9e07c8da.1542736240.git.jpoimboe@redhat.com
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Sasha Levin <sashal@kernel.org>

commit 63bc6364fb5730ed4ace8886697d92b186a5eb64
Author: Artem Savkov <asavkov@redhat.com>
Date:   Tue Nov 20 11:52:15 2018 -0600

    objtool: Fix double-free in .cold detection error path
    
    [ Upstream commit 0b9301fb632f7111a3293a30cc5b20f1b82ed08d ]
    
    If read_symbols() fails during second list traversal (the one dealing
    with ".cold" subfunctions) it frees the symbol, but never deletes it
    from the list/hash_table resulting in symbol being freed again in
    elf_close(). Fix it by just returning an error, leaving cleanup to
    elf_close().
    
    Signed-off-by: Artem Savkov <asavkov@redhat.com>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Linus Torvalds <torvalds@linux-foundation.org>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: 13810435b9a7 ("objtool: Support GCC 8's cold subfunctions")
    Link: http://lkml.kernel.org/r/beac5a9b7da9e8be90223459dcbe07766ae437dd.1542736240.git.jpoimboe@redhat.com
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Sasha Levin <sashal@kernel.org>
commit 779f4eecbcecc941cfa93d135570eb45c61ee7e6
Author: Artem Savkov <asavkov@redhat.com>
Date:   Tue Nov 20 11:52:16 2018 -0600

    objtool: Fix segfault in .cold detection with -ffunction-sections
    
    [ Upstream commit 22566c1603030f0a036ad564634b064ad1a55db2 ]
    
    Because find_symbol_by_name() traverses the same lists as
    read_symbols(), changing sym->name in place without copying it affects
    the result of find_symbol_by_name().  In the case where a ".cold"
    function precedes its parent in sec->symbol_list, it can result in a
    function being considered a parent of itself. This leads to function
    length being set to 0 and other consequent side-effects including a
    segfault in add_switch_table().  The effects of this bug are only
    visible when building with -ffunction-sections in KCFLAGS.
    
    Fix by copying the search string instead of modifying it in place.
    
    Signed-off-by: Artem Savkov <asavkov@redhat.com>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Linus Torvalds <torvalds@linux-foundation.org>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: 13810435b9a7 ("objtool: Support GCC 8's cold subfunctions")
    Link: http://lkml.kernel.org/r/910abd6b5a4945130fd44f787c24e07b9e07c8da.1542736240.git.jpoimboe@redhat.com
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Sasha Levin <sashal@kernel.org>

commit 63bc6364fb5730ed4ace8886697d92b186a5eb64
Author: Artem Savkov <asavkov@redhat.com>
Date:   Tue Nov 20 11:52:15 2018 -0600

    objtool: Fix double-free in .cold detection error path
    
    [ Upstream commit 0b9301fb632f7111a3293a30cc5b20f1b82ed08d ]
    
    If read_symbols() fails during second list traversal (the one dealing
    with ".cold" subfunctions) it frees the symbol, but never deletes it
    from the list/hash_table resulting in symbol being freed again in
    elf_close(). Fix it by just returning an error, leaving cleanup to
    elf_close().
    
    Signed-off-by: Artem Savkov <asavkov@redhat.com>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Linus Torvalds <torvalds@linux-foundation.org>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: 13810435b9a7 ("objtool: Support GCC 8's cold subfunctions")
    Link: http://lkml.kernel.org/r/beac5a9b7da9e8be90223459dcbe07766ae437dd.1542736240.git.jpoimboe@redhat.com
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Sasha Levin <sashal@kernel.org>
checking b790b4f22a165e85f0b53a3231764034e42c7ea6 ......
checking b6e7b985f8c5b7a1fe098bc6f31af2eea4d9b1ad ......
	 orig commit -> a12a4e023a55f058178afea1ada3ce7bf4db94c3 ......
checking c5e64da62affbd9796ca801e92bfabe3a03fdccc ......
	 orig commit -> 68289cbd83eaa20faef7cc818121bc8e769065de ......
checking 110cf308d24a6b7ec27852a4d0933bfe00f551c9 ......
	 orig commit -> 8607c1ee734d12f62c6a46abef13a510e25a1839 ......
checking d45e1f06a18644d18c0280c0a1091d22f7fa8b83 ......
	 orig commit -> f6441aff8946f7fd6ab730d7eb9eba18a9ebeba4 ......
checking 86ff378c684e906d067d18c656e74278c32b7896 ......
	 orig commit -> 379d61b1c7d42512cded04d372f15a7e725db9e1 ......
checking 4c0d447524c11f5d431f05db68e02e286caa3e01 ......
	 orig commit -> 67ef28794d7e30f33936d655f2951e8dcae7cd5a ......
checking f8d0cad4a459aec8bd01486cf53fc5cd34ff92d1 ......
	 orig commit -> aeafd623f866c429307e3a4a39998f5f06b4f00e ......
checking 8307d019973c272af2ef8524397ba24476fd5b60 ......
	 orig commit -> abb26210a39522a6645bce3f438ed9a26bedb11b ......
checking 9340289c479f72594c90c98dcf1f2b3db927e5fb ......
	 orig commit -> 73a9bf95ed1c05698ecabe2f28c47aedfa61b52b ......
checking 935e5af3ac37269b81dc331965e283da57d579f3 ......
	 orig commit -> eaa75b5117d52adf1efd3c6c3fb4bd8f97de648b ......
checking 461d111ee5d2dfe19af59ce2d7be7f2a48b4fee5 ......
	 orig commit -> 2bcdeadbc094b4f6511aedea1e5b8052bf0cc89c ......
checking c204537d5a47a4873d0860a8bd7adc3f3fe58091 ......
	 orig commit -> 4900653829175f60356efc279695bb23c59483c3 ......
checking 09aaaa609ea4f9eb28382b22ee9a30489daf82ee ......
	 orig commit -> 12ea65390bd5a46f8a70f068eb0d48922576a781 ......
checking ea2313bfce7901d166e4bef26b943bb5e5dd29eb ......
	 orig commit -> 192614010a5052fe92611c7076ef664fd9bb60e8 ......
checking 22210278dcc0042955036671625b5771b01e5dc3 ......
	 orig commit -> 376a5fb34b04524af501a0c5979c5920be940e05 ......
checking 5828462fea805ed1c6666ab827cb9cdb88209990 ......
	 orig commit -> b328daf3b7130098b105c18bdae694ddaad5b6e3 ......
checking 856bc9a0cb3a13c5dfd11f8a73ff1cd221778174 ......
	 orig commit -> 02bc11de567273da8ab25c54336ddbb71986f38f ......
checking 24ac7a44f7201fdecb2b4068de1ac808f265ede4 ......
	 orig commit -> dcc914f44f065ef73685b37e59877a5bb3cb7358 ......
checking add0ff1791c6a3867329f14a003b7177ce5fd878 ......
	 orig commit -> d1091c7fa3d52ebce4dd3f15d04155b3469b2f90 ......
		 d1091c7fa3d52ebce4dd3f15d04155b3469b2f90 has problem. Fixes commit -> 649ea4d5a624f061a111b1f1cb0e47cfdc3ac21b
e390f9a9689a42f477a6073e2e7df530a4c1b740
55149d06534ae2a7ba5f7a078353deb89b3fe891
4e4636cf981b5b629fbfb78aa9f232e015f7d521
3d1e236022cc1426b0834565995ddee2ca231cee
commit 6464206844f5201dbe757a95f11b77e98965174c
Author: Josh Poimboeuf <jpoimboe@redhat.com>
Date:   Mon Feb 27 22:21:16 2017 -0600

    objtool: Enclose contents of unreachable() macro in a block
    
    commit 4e4636cf981b5b629fbfb78aa9f232e015f7d521 upstream.
    
    Guenter Roeck reported a boot failure in mips64.  It was bisected to the
    following commit:
    
      d1091c7fa3d5 ("objtool: Improve detection of BUG() and other dead ends")
    
    The unreachable() macro was formerly only composed of a single
    statement.  The above commit added a second statement, but neglected to
    enclose the statements in a block.
    
    Suggested-by: Guenter Roeck <linux@roeck-us.net>
    Reported-by: Guenter Roeck <linux@roeck-us.net>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Linus Torvalds <torvalds@linux-foundation.org>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: d1091c7fa3d5 ("objtool: Improve detection of BUG() and other dead ends")
    Link: http://lkml.kernel.org/r/20170228042116.glmwmwiohcix7o4a@treble
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 35aee626fa6311c3942fedd50c50f6748922e89f
Author: Josh Poimboeuf <jpoimboe@redhat.com>
Date:   Wed Mar 1 12:04:44 2017 -0600

    objtool, modules: Discard objtool annotation sections for modules
    
    commit e390f9a9689a42f477a6073e2e7df530a4c1b740 upstream.
    
    The '__unreachable' and '__func_stack_frame_non_standard' sections are
    only used at compile time.  They're discarded for vmlinux but they
    should also be discarded for modules.
    
    Since this is a recurring pattern, prefix the section names with
    ".discard.".  It's a nice convention and vmlinux.lds.h already discards
    such sections.
    
    Also remove the 'a' (allocatable) flag from the __unreachable section
    since it doesn't make sense for a discarded section.
    
    Suggested-by: Linus Torvalds <torvalds@linux-foundation.org>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Jessica Yu <jeyu@redhat.com>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: d1091c7fa3d5 ("objtool: Improve detection of BUG() and other dead ends")
    Link: http://lkml.kernel.org/r/20170301180444.lhd53c5tibc4ns77@treble
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    [dwmw2: Remove the unreachable part in backporting since it's not here yet]
    Signed-off-by: David Woodhouse <dwmw@amazon.co.ku>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
commit 6464206844f5201dbe757a95f11b77e98965174c
Author: Josh Poimboeuf <jpoimboe@redhat.com>
Date:   Mon Feb 27 22:21:16 2017 -0600

    objtool: Enclose contents of unreachable() macro in a block
    
    commit 4e4636cf981b5b629fbfb78aa9f232e015f7d521 upstream.
    
    Guenter Roeck reported a boot failure in mips64.  It was bisected to the
    following commit:
    
      d1091c7fa3d5 ("objtool: Improve detection of BUG() and other dead ends")
    
    The unreachable() macro was formerly only composed of a single
    statement.  The above commit added a second statement, but neglected to
    enclose the statements in a block.
    
    Suggested-by: Guenter Roeck <linux@roeck-us.net>
    Reported-by: Guenter Roeck <linux@roeck-us.net>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Linus Torvalds <torvalds@linux-foundation.org>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: d1091c7fa3d5 ("objtool: Improve detection of BUG() and other dead ends")
    Link: http://lkml.kernel.org/r/20170228042116.glmwmwiohcix7o4a@treble
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 35aee626fa6311c3942fedd50c50f6748922e89f
Author: Josh Poimboeuf <jpoimboe@redhat.com>
Date:   Wed Mar 1 12:04:44 2017 -0600

    objtool, modules: Discard objtool annotation sections for modules
    
    commit e390f9a9689a42f477a6073e2e7df530a4c1b740 upstream.
    
    The '__unreachable' and '__func_stack_frame_non_standard' sections are
    only used at compile time.  They're discarded for vmlinux but they
    should also be discarded for modules.
    
    Since this is a recurring pattern, prefix the section names with
    ".discard.".  It's a nice convention and vmlinux.lds.h already discards
    such sections.
    
    Also remove the 'a' (allocatable) flag from the __unreachable section
    since it doesn't make sense for a discarded section.
    
    Suggested-by: Linus Torvalds <torvalds@linux-foundation.org>
    Signed-off-by: Josh Poimboeuf <jpoimboe@redhat.com>
    Cc: Jessica Yu <jeyu@redhat.com>
    Cc: Peter Zijlstra <peterz@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Fixes: d1091c7fa3d5 ("objtool: Improve detection of BUG() and other dead ends")
    Link: http://lkml.kernel.org/r/20170301180444.lhd53c5tibc4ns77@treble
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    [dwmw2: Remove the unreachable part in backporting since it's not here yet]
    Signed-off-by: David Woodhouse <dwmw@amazon.co.ku>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
